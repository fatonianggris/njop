/*! ****************************************************************************
Copyright (c) Microblink. All rights reserved.

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
***************************************************************************** */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).BlinkIDSDK={})}(this,(function(e){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function t(e,t,r,i){return new(r||(r=Promise))((function(s,o){function n(e){try{A(i.next(e))}catch(e){o(e)}}function a(e){try{A(i.throw(e))}catch(e){o(e)}}function A(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,a)}A((i=i.apply(e,t||[])).next())}))}let r=0;class i{constructor(e){this.action=e,this.messageID=function(){const e=r;return r+=1,e}()}}class s extends i{constructor(e,t){super(s.action),this.wasmModuleName=e.wasmModuleName,this.licenseKey=e.licenseKey,this.userId=t,this.registerLoadCallback=null!==e.loadProgressCallback,this.allowHelloMessage=e.allowHelloMessage,this.engineLocation=e.engineLocation,this.wasmType=e.wasmType,this.numberOfWorkers=e.numberOfWorkers}}var o,n,a;s.action="init",function(e){e[e.Any=0]="Any",e[e.Recognizer=1]="Recognizer",e[e.RecognizerSettings=2]="RecognizerSettings",e[e.Callback=3]="Callback"}(o||(o={}));class A extends i{constructor(e,t){super(A.action),this.className=e,this.params=t}}A.action="createNewNativeObject";class E extends i{constructor(e,t,r){super(E.action),this.recognizerHandles=e,this.allowMultipleResults=t,this.registeredMetadataCallbacks=r}}E.action="createRecognizerRunner";class R extends i{constructor(e,t){super(R.action),this.recognizerHandles=e,this.allowMultipleResults=t}}R.action="reconfigureRecognizerRunner";class I extends i{constructor(){super(I.action)}}I.action="deleteRecognizerRunner";class c extends i{constructor(e,t,r){super(c.action),this.objectHandle=e,this.methodName=t,this.params=r}}c.action="invokeObject";class N extends i{constructor(e){super(N.action),this.frame=e}getTransferrables(){return[this.frame.imageData.data.buffer]}}N.action="processImage";class d extends i{constructor(e){super(d.action),this.hardReset=e}}d.action="resetRecognizers";class l{constructor(){this.onDebugText=!1,this.onDetectionFailed=!1,this.onQuadDetection=!1,this.onPointsDetection=!1,this.onFirstSideResult=!1,this.onGlare=!1}}class S extends i{constructor(e){super(S.action),this.registeredMetadataCallbacks=e}}S.action="registerMetadataCallbacks";class _ extends i{constructor(e){super(_.action),this.detectionOnlyMode=e}}_.action="setDetectionOnly";class O extends i{constructor(e){super(O.action),this.callbackNonEmpty=e}}O.action="setClearTimeoutCallback";class C extends i{constructor(e){super(C.action),this.cameraPreviewMirrored=e}}C.action="setCameraPreviewMirrored",function(e){e[e.onDebugText=0]="onDebugText",e[e.onDetectionFailed=1]="onDetectionFailed",e[e.onQuadDetection=2]="onQuadDetection",e[e.onPointsDetection=3]="onPointsDetection",e[e.onFirstSideResult=4]="onFirstSideResult",e[e.clearTimeoutCallback=5]="clearTimeoutCallback",e[e.onGlare=6]="onGlare",e[e.recognizerCallback=7]="recognizerCallback"}(n||(n={})),(a=e.WasmType||(e.WasmType={})).Basic="BASIC",a.Advanced="ADVANCED",a.AdvancedWithThreads="ADVANCED_WITH_THREADS";function u(e,t){return r=>{const i=r;i.success?e():t(i.error)}}function D(e,t){return r=>{const i=r;i.success?e(r):t(i.error)}}class T{constructor(e,t,r){this.wasmSDKWorker=e,this.objectHandle=r,this.recognizerName=t,this.callbacks=new Map}getRemoteObjectHandle(){return this.objectHandle}currentSettings(){return new Promise(((e,t)=>{if(0>this.objectHandle)return void t("Invalid object handle: "+this.objectHandle);const r=new c(this.objectHandle,"currentSettings",[]),i=D((t=>{e(t.result)}),t);this.wasmSDKWorker.postMessage(r,i)}))}toJSON(){return new Promise(((e,t)=>{if(0>this.objectHandle)return void t("Invalid object handle: "+this.objectHandle);const r=new c(this.objectHandle,"toJSON",[]),i=D((t=>{e(t.result)}),t);this.wasmSDKWorker.postMessage(r,i)}))}clearAllCallbacks(){this.callbacks.clear(),this.wasmSDKWorker.unregisterRecognizerCallbacks(this.objectHandle)}removeFunctions(e){this.clearAllCallbacks();const t=Object.keys(e);let r=!1;for(const i of t){const t=e[i];if("function"==typeof t){this.callbacks.set(i,t);e[i]={parameter:{recognizerHandle:this.objectHandle,callbackName:i},type:o.Callback},r=!0}}return r&&this.wasmSDKWorker.registerRecognizerCallbacks(this.objectHandle,this),e}updateSettings(e){return new Promise(((t,r)=>{if(0>this.objectHandle)return void r("Invalid object handle: "+this.objectHandle);const i=new c(this.objectHandle,"updateSettings",[{parameter:this.removeFunctions(e),type:o.RecognizerSettings}]),s=u(t,r);this.wasmSDKWorker.postMessage(i,s)}))}invokeCallback(e,t){const r=this.callbacks.get(e);void 0!==r?r(...t):console.warn("Cannot find callback",e)}getResult(){return new Promise(((e,t)=>{if(0>this.objectHandle)return void t("Invalid object handle: "+this.objectHandle);const r=new c(this.objectHandle,"getResult",[]),i=D((t=>{e(t.result)}),t);this.wasmSDKWorker.postMessage(r,i)}))}delete(){return new Promise(((e,t)=>{if(0>this.objectHandle)return void t("Invalid object handle: "+this.objectHandle);this.clearAllCallbacks();const r=new c(this.objectHandle,"delete",[]),i=u((()=>{this.objectHandle=-1,e()}),t);this.wasmSDKWorker.postMessage(r,i)}))}}function m(e){const t=new l;return t.onDebugText=!!e.onDebugText,t.onDetectionFailed=!!e.onDetectionFailed,t.onPointsDetection=!!e.onPointsDetection,t.onQuadDetection=!!e.onQuadDetection,t.onFirstSideResult=!!e.onFirstSideResult,t.onGlare=!!e.onGlare,t}class L{constructor(e){this.deleted=!1,this.wasmSDKWorker=e}processImage(e){return new Promise(((t,r)=>{if(this.deleted)return void r("Recognizer runner is deleted. It cannot be used anymore!");const i=new N(e),s=D((e=>{t(e.recognitionState)}),r);this.wasmSDKWorker.postTransferrableMessage(i,s)}))}reconfigureRecognizers(e,t){return new Promise(((r,i)=>{if(this.deleted)return void i("Recognizer runner is deleted. It cannot be used anymore!");const s=M(e),o=new R(s,t),n=u(r,i);this.wasmSDKWorker.postMessage(o,n)}))}setMetadataCallbacks(e){return new Promise(((t,r)=>{const i=new S(m(e)),s=u(t,r);this.wasmSDKWorker.postMessageAndRegisterCallbacks(i,e,s)}))}resetRecognizers(e){return new Promise(((t,r)=>{const i=new d(e),s=u(t,r);this.wasmSDKWorker.postMessage(i,s)}))}setDetectionOnlyMode(e){return new Promise(((t,r)=>{const i=new _(e),s=u(t,r);this.wasmSDKWorker.postMessage(i,s)}))}setClearTimeoutCallback(e){return new Promise(((t,r)=>{const i=new O(null!==e),s=u(t,r);this.wasmSDKWorker.registerClearTimeoutCallback(e),this.wasmSDKWorker.postMessage(i,s)}))}setCameraPreviewMirrored(e){return new Promise(((t,r)=>{const i=new C(e),s=u(t,r);this.wasmSDKWorker.postMessage(i,s)}))}delete(){return this.deleted?Promise.reject("Recognizer runner is already deleted."):new Promise(((e,t)=>{const r=new I,i=u((()=>{this.deleted=!0,e()}),t);this.wasmSDKWorker.postMessage(r,i)}))}}function M(e){const t=[];for(const r of e)t.push(r.getRemoteObjectHandle());return t}class g{constructor(e){this.wasmSDKWorker=e}createRecognizerRunner(e,t=!1,r={}){return new Promise(((i,s)=>{const o=M(e),n=new E(o,t,m(r)),a=u((()=>{i(new L(this.wasmSDKWorker))}),s);this.wasmSDKWorker.postMessageAndRegisterCallbacks(n,r,a)}))}newRecognizer(e,...t){return new Promise(((r,i)=>{const s=new A(e,function(e){const t=[];for(let r of e){let e=o.Any;r instanceof T&&(e=o.Recognizer,r=r.getRemoteObjectHandle()),t.push({parameter:r,type:e})}return t}(t)),n=D((t=>{const i=new T(this.wasmSDKWorker,e,t.objectHandle);r(i)}),i);this.wasmSDKWorker.postMessage(s,n)}))}}class U{constructor(t,r,i){this.eventHandlers={},this.metadataCallbacks={},this.clearTimeoutCallback=null,this.loadedWasmType=e.WasmType.Basic,this.mbWasmWorker=t,this.mbWasmWorker.onmessage=e=>{this.handleWorkerEvent(e)},this.mbWasmWorker.onerror=()=>{i("Problem during initialization of worker file!")},this.mbWasmModule=new g(this),this.loadCallback=r,this.recognizersWithCallbacks=new Map,this.showOverlay=!1}postMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e)}postTransferrableMessage(e,t){this.eventHandlers[e.messageID]=t,this.mbWasmWorker.postMessage(e,e.getTransferrables())}postMessageAndRegisterCallbacks(e,t,r){this.eventHandlers[e.messageID]=r,this.metadataCallbacks=t,this.mbWasmWorker.postMessage(e)}registerClearTimeoutCallback(e){this.clearTimeoutCallback=e}registerRecognizerCallbacks(e,t){this.recognizersWithCallbacks.set(e,t)}unregisterRecognizerCallbacks(e){this.recognizersWithCallbacks.delete(e)}delete(){this.mbWasmWorker.terminate()}handleWorkerEvent(e){if("isCallbackMessage"in e.data){const t=e.data;switch(t.callbackType){case n.onDebugText:"function"==typeof this.metadataCallbacks.onDebugText&&this.metadataCallbacks.onDebugText(t.callbackParameters[0]);break;case n.onDetectionFailed:"function"==typeof this.metadataCallbacks.onDetectionFailed&&this.metadataCallbacks.onDetectionFailed();break;case n.onPointsDetection:"function"==typeof this.metadataCallbacks.onPointsDetection&&this.metadataCallbacks.onPointsDetection(t.callbackParameters[0]);break;case n.onQuadDetection:"function"==typeof this.metadataCallbacks.onQuadDetection&&this.metadataCallbacks.onQuadDetection(t.callbackParameters[0]);break;case n.onFirstSideResult:"function"==typeof this.metadataCallbacks.onFirstSideResult&&this.metadataCallbacks.onFirstSideResult();break;case n.clearTimeoutCallback:this.clearTimeoutCallback&&"function"==typeof this.clearTimeoutCallback.onClearTimeout&&this.clearTimeoutCallback.onClearTimeout();break;case n.onGlare:"function"==typeof this.metadataCallbacks.onGlare&&this.metadataCallbacks.onGlare(t.callbackParameters[0]);break;case n.recognizerCallback:{const e=t.callbackParameters.shift(),r=this.recognizersWithCallbacks.get(e.recognizerHandle);void 0!==r?r.invokeCallback(e.callbackName,t.callbackParameters):console.warn("Cannot find recognizer to deliver callback message. Maybe it's destroyed?",e);break}default:throw Error("Unknown callback type: "+n[t.callbackType])}}else if("isLoadProgressMessage"in e.data){const t=e.data;"function"==typeof this.loadCallback&&this.loadCallback(t.progress)}else{const t=e.data,r=this.eventHandlers[t.messageID];delete this.eventHandlers[t.messageID],r(t)}}static createWasmWorker(e,r,i){return t(this,void 0,void 0,(function*(){return new Promise(((t,o)=>{const n=new U(e,r.loadProgressCallback,o),a=new s(r,i),A=D((e=>{const r=e;n.showOverlay=r.showOverlay,n.loadedWasmType=r.wasmType,t(n)}),(e=>{n&&"function"==typeof n.delete&&n.delete(),o(e)}));n.postMessage(a,A)}))}))}}class h{constructor(e,t){if(!e.code||!e.message)throw Error("Instance of SDKError is required to have code and message.");this.message=e.message,this.code=e.code,this.details=t}}var P,F;(P=e.ErrorCodes||(e.ErrorCodes={})).WORKER_WASM_LOAD_FAILURE="WORKER_WASM_LOAD_FAILURE",P.WORKER_WASM_INIT_MISSING="WORKER_WASM_INIT_MISSING",P.WORKER_FUNCTION_INVOKE_FAILURE="WORKER_FUNCTION_INVOKE_FAILURE",P.WORKER_RECOGNIZER_CREATION_FAILURE="WORKER_RECOGNIZER_CREATION_FAILURE",P.WORKER_RUNNER_EXISTS="WORKER_RUNNER_EXISTS",P.WORKER_RUNNER_CREATION_FAILURE="WORKER_RUNNER_CREATION_FAILURE",P.WORKER_RUNNER_MISSING="WORKER_RUNNER_MISSING",P.WORKER_RUNNER_RECONFIGURE_FAILURE="WORKER_RUNNER_RECONFIGURE_FAILURE",P.WORKER_RUNNER_DELETED="WORKER_RUNNER_DELETED",P.WORKER_RUNNER_DELETE_FAILURE="WORKER_RUNNER_DELETE_FAILURE",P.WORKER_OBJECT_INVOKE_FAILURE="WORKER_OBJECT_INVOKE_FAILURE",P.WORKER_IMAGE_PROCESS_FAILURE="WORKER_IMAGE_PROCESS_FAILURE",P.WORKER_HANDLE_UNDEFINED="WORKER_HANDLE_UNDEFINED",P.WORKER_MESSAGE_ACTION_UNKNOWN="WORKER_MESSAGE_ACTION_UNKNOWN",P.WORKER_LICENSE_UNLOCK_ERROR="WORKER_LICENSE_UNLOCK_ERROR",P.LOCAL_SDK_RUNNER_MISSING="LOCAL_SDK_RUNNER_MISSING",P.LOCAL_SDK_RUNNER_EMPTY="LOCAL_SDK_RUNNER_EMPTY",P.LICENSE_UNLOCK_ERROR="LICENSE_UNLOCK_ERROR",P.FRAME_CAPTURE_SVG_UNSUPPORTED="FRAME_CAPTURE_SVG_UNSUPPORTED",P.FRAME_CAPTURE_CANVAS_MISSING="FRAME_CAPTURE_CANVAS_MISSING",P.SDK_WASM_SETTINGS_MISSING="SDK_WASM_SETTINGS_MISSING",P.SDK_LICENSE_KEY_MISSING="SDK_LICENSE_KEY_MISSING",P.SDK_WASM_MODULE_NAME_MISSING="SDK_WASM_MODULE_NAME_MISSING",P.SDK_ENGINE_LOCATION_INVALID="SDK_ENGINE_LOCATION_INVALID",P.SDK_MISSING="SDK_MISSING",P.SDK_RECOGNIZERS_MISSING="SDK_RECOGNIZERS_MISSING",P.VIDEO_RECOGNIZER_ELEMENT_MISSING="VIDEO_RECOGNIZER_ELEMENT_MISSING",P.VIDEO_RECOGNIZER_CAMERA_MISSING="VIDEO_RECOGNIZER_CAMERA_MISSING",P.VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED="VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED",P.VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE="VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE",P.VIDEO_RECOGNIZER_CAMERA_IN_USE="VIDEO_RECOGNIZER_CAMERA_IN_USE",P.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED="VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED",P.VIDEO_RECOGNIZER_FEED_RELEASED="VIDEO_RECOGNIZER_FEED_RELEASED",P.VIDEO_RECOGNIZER_FEED_NOT_PAUSED="VIDEO_RECOGNIZER_FEED_NOT_PAUSED",P.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED="VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED",P.VIDEO_RECOGNIZER_FEED_PAUSED="VIDEO_RECOGNIZER_FEED_PAUSED",P.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE="VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE",P.VIDEO_RECOGNIZER_FEED_MISSING="VIDEO_RECOGNIZER_FEED_MISSING",(F=e.ErrorMessages||(e.ErrorMessages={})).WORKER_HANDLE_UNDEFINED="Cannot find object with handle: undefined",F.WORKER_WASM_LOAD_FAILURE="Failed to load WASM in web worker!",F.WORKER_WASM_INIT_MISSING="WASM module is not initialized!",F.WORKER_FUNCTION_INVOKE_FAILURE="Failed to invoke function!",F.WORKER_RECOGNIZER_CREATION_FAILURE="Failed to create new recognizer!",F.WORKER_RUNNER_EXISTS="Recognizer runner is already created! Multiple instances are not allowed!",F.WORKER_RUNNER_CREATION_FAILURE="Failed to create new recognizer runner!",F.WORKER_RUNNER_MISSING="Recognizer runner is not created! There is nothing to reconfigure!",F.WORKER_RUNNER_RECONFIGURE_FAILURE="Failed to reconfigure recognizer runner!",F.WORKER_RUNNER_DELETED="Recognizer runner is already deleted!",F.WORKER_RUNNER_DELETE_FAILURE="Failed to delete recognizer runner!",F.WORKER_OBJECT_INVOKE_FAILURE="Failed to invoke object!",F.WORKER_IMAGE_PROCESS_FAILURE="Recognizer runner is not initialized! Cannot process image!",F.LOCAL_SDK_RUNNER_MISSING="Property nativeRecognizerRunner is not available!",F.LOCAL_SDK_RUNNER_EMPTY="Native RecognizerRunner cannot be empty!",F.LICENSE_TOKEN_STATE_INCORRECT="Internal error (Incorrect token state)",F.LICENSE_PAYLOAD_VERIFICATION_FAILED="Failed to verify server permission's digital signature!",F.LICENSE_PAYLOAD_CORRUPTED="Server permission payload is corrupted!",F.LICENSE_PERMISSION_EXPIRED="Internal error (server permission expired)",F.LICENSE_REMOTE_LOCKED="Provided license key has been remotely locked. Please contact support for more information!",F.FRAME_CAPTURE_SVG_UNSUPPORTED="Recognition of SVG elements not supported!",F.FRAME_CAPTURE_CANVAS_MISSING="Could not get canvas 2d context!",F.SDK_WASM_SETTINGS_MISSING="Missing WASM load settings!",F.SDK_LICENSE_KEY_MISSING="Missing license key!",F.SDK_WASM_MODULE_NAME_MISSING="Missing WASM module name!",F.SDK_ENGINE_LOCATION_INVALID="Setting property 'engineLocation' must be a string!",F.SDK_MISSING="SDK is not provided!",F.SDK_RECOGNIZERS_MISSING="To create RecognizerRunner at least 1 recognizer is required.",F.VIDEO_RECOGNIZER_ELEMENT_MISSING="Video element, i.e. camera feed is not provided!",F.VIDEO_RECOGNIZER_CAMERA_MISSING="Camera not found!",F.VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED="Camera not allowed!",F.VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE="Camera not available!",F.VIDEO_RECOGNIZER_CAMERA_IN_USE="Camera in use!",F.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED="Media devices not supported by browser.",F.VIDEO_RECOGNIZER_FEED_RELEASED="The associated video feed has been released!",F.VIDEO_RECOGNIZER_FEED_NOT_PAUSED="The associated video feed is not paused. Use resumeRecognition instead!",F.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED="The play() request was interrupted or prevented by browser security rules!",F.VIDEO_RECOGNIZER_FEED_PAUSED="Cannot resume recognition while video feed is paused! Use recognize or startRecognition",F.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE="Could not reset recognizers!",F.VIDEO_RECOGNIZER_FEED_MISSING="Missing video feed!";const p={feedMissing:{message:e.ErrorMessages.VIDEO_RECOGNIZER_FEED_MISSING,code:e.ErrorCodes.VIDEO_RECOGNIZER_FEED_MISSING},recognizersResetFailure:{message:e.ErrorMessages.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE,code:e.ErrorCodes.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE},feedPaused:{message:e.ErrorMessages.VIDEO_RECOGNIZER_FEED_PAUSED,code:e.ErrorCodes.VIDEO_RECOGNIZER_FEED_PAUSED},playRequestInterrupted:{message:e.ErrorMessages.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED,code:e.ErrorCodes.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED},videoFeedNotPaused:{message:e.ErrorMessages.VIDEO_RECOGNIZER_FEED_NOT_PAUSED,code:e.ErrorCodes.VIDEO_RECOGNIZER_FEED_NOT_PAUSED},videoFeedReleased:{message:e.ErrorMessages.VIDEO_RECOGNIZER_FEED_RELEASED,code:e.ErrorCodes.VIDEO_RECOGNIZER_FEED_RELEASED},mediaDevicesUnsupported:{code:e.ErrorCodes.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED,message:e.ErrorMessages.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED},cameraMissing:{code:e.ErrorCodes.VIDEO_RECOGNIZER_CAMERA_MISSING,message:e.ErrorMessages.VIDEO_RECOGNIZER_CAMERA_MISSING},elementMissing:{message:e.ErrorMessages.VIDEO_RECOGNIZER_ELEMENT_MISSING,code:e.ErrorCodes.VIDEO_RECOGNIZER_ELEMENT_MISSING}},G={wasmSettingsMissing:{message:e.ErrorMessages.SDK_WASM_SETTINGS_MISSING,code:e.ErrorCodes.SDK_WASM_SETTINGS_MISSING},licenseKeyMissing:{message:e.ErrorMessages.SDK_LICENSE_KEY_MISSING,code:e.ErrorCodes.SDK_LICENSE_KEY_MISSING},wasmModuleNameMissing:{message:e.ErrorMessages.SDK_WASM_MODULE_NAME_MISSING,code:e.ErrorCodes.SDK_WASM_MODULE_NAME_MISSING},engineLocationInvalid:{message:e.ErrorMessages.SDK_ENGINE_LOCATION_INVALID,code:e.ErrorCodes.SDK_ENGINE_LOCATION_INVALID},missing:{message:e.ErrorMessages.SDK_MISSING,code:e.ErrorCodes.SDK_MISSING},recognizersMissing:{message:e.ErrorMessages.SDK_RECOGNIZERS_MISSING,code:e.ErrorCodes.SDK_RECOGNIZERS_MISSING}},K={svgUnsupported:{message:e.ErrorMessages.FRAME_CAPTURE_SVG_UNSUPPORTED,code:e.ErrorCodes.FRAME_CAPTURE_SVG_UNSUPPORTED},canvasMissing:{message:e.ErrorMessages.FRAME_CAPTURE_CANVAS_MISSING,code:e.ErrorCodes.FRAME_CAPTURE_CANVAS_MISSING}},b={licenseTokenStateIncorrect:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR,message:e.ErrorMessages.LICENSE_TOKEN_STATE_INCORRECT},licensePayloadVerificationFailed:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR,message:e.ErrorMessages.LICENSE_PAYLOAD_VERIFICATION_FAILED},licensePayloadCorrupted:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR,message:e.ErrorMessages.LICENSE_PAYLOAD_CORRUPTED},licensePermissionExpired:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR,message:e.ErrorMessages.LICENSE_PERMISSION_EXPIRED},licenseRemoteLocked:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR,message:e.ErrorMessages.LICENSE_REMOTE_LOCKED},licenseNetworkError:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR},licenseInvalid:{code:e.ErrorCodes.LICENSE_UNLOCK_ERROR}},f={runnerMissing:{message:e.ErrorMessages.LOCAL_SDK_RUNNER_MISSING,code:e.ErrorCodes.LOCAL_SDK_RUNNER_MISSING},runnerEmpty:{message:e.ErrorMessages.LOCAL_SDK_RUNNER_EMPTY,code:e.ErrorCodes.LOCAL_SDK_RUNNER_EMPTY}},v={imageProcessFailure:{message:e.ErrorMessages.WORKER_IMAGE_PROCESS_FAILURE,code:e.ErrorCodes.WORKER_IMAGE_PROCESS_FAILURE},objectInvokeFailure:{message:e.ErrorMessages.WORKER_OBJECT_INVOKE_FAILURE,code:e.ErrorCodes.WORKER_OBJECT_INVOKE_FAILURE},runnerDeleteFailure:{message:e.ErrorMessages.WORKER_RUNNER_DELETE_FAILURE,code:e.ErrorCodes.WORKER_RUNNER_DELETE_FAILURE},runnerDeleted:{message:e.ErrorMessages.WORKER_RUNNER_DELETED,code:e.ErrorCodes.WORKER_RUNNER_DELETED},runnerReconfigureFailure:{message:e.ErrorMessages.WORKER_RUNNER_RECONFIGURE_FAILURE,code:e.ErrorCodes.WORKER_RUNNER_RECONFIGURE_FAILURE},runnerMissing:{message:e.ErrorMessages.WORKER_RUNNER_MISSING,code:e.ErrorCodes.WORKER_RUNNER_MISSING},runnerCreationFailure:{message:e.ErrorMessages.WORKER_RUNNER_CREATION_FAILURE,code:e.ErrorCodes.WORKER_RUNNER_CREATION_FAILURE},runnerExists:{message:e.ErrorMessages.WORKER_RUNNER_EXISTS,code:e.ErrorCodes.WORKER_RUNNER_EXISTS},recognizerCreationFailure:{message:e.ErrorMessages.WORKER_RECOGNIZER_CREATION_FAILURE,code:e.ErrorCodes.WORKER_RECOGNIZER_CREATION_FAILURE},functionInvokeFailure:{message:e.ErrorMessages.WORKER_FUNCTION_INVOKE_FAILURE,code:e.ErrorCodes.WORKER_FUNCTION_INVOKE_FAILURE},wasmInitMissing:{message:e.ErrorMessages.WORKER_WASM_INIT_MISSING,code:e.ErrorCodes.WORKER_WASM_INIT_MISSING},wasmLoadFailure:{message:e.ErrorMessages.WORKER_WASM_LOAD_FAILURE,code:e.ErrorCodes.WORKER_WASM_LOAD_FAILURE},handleUndefined:{message:e.ErrorMessages.WORKER_HANDLE_UNDEFINED,code:e.ErrorCodes.WORKER_HANDLE_UNDEFINED}};var W;(W=e.PreferredCameraType||(e.PreferredCameraType={}))[W.BackFacingCamera=0]="BackFacingCamera",W[W.FrontFacingCamera=1]="FrontFacingCamera";const y=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];function V(e){const t=e.toLowerCase();return y.some((e=>t.includes(e)))}class w{constructor(e,t){this.deviceId=e.deviceId,this.facing=t,this.groupId=e.groupId,this.label=e.label}}function H(){return t(this,void 0,void 0,(function*(){const t=[],r=[];{let i=yield navigator.mediaDevices.enumerateDevices();if(i.filter((e=>"videoinput"===e.kind)).every((e=>""===e.label))){const e=yield navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});i=yield navigator.mediaDevices.enumerateDevices(),e.getTracks().forEach((e=>e.stop()))}const s=i.filter((e=>"videoinput"===e.kind));for(const i of s)V(i.label)?r.push(new w(i,e.PreferredCameraType.BackFacingCamera)):t.push(new w(i,e.PreferredCameraType.FrontFacingCamera))}return{frontCameras:t,backCameras:r}}))}function k(r,i){return t(this,void 0,void 0,(function*(){const{frontCameras:t,backCameras:s}=yield H();if(t.length>0||s.length>0){let o=s.length>0?s:t;i===e.PreferredCameraType.BackFacingCamera&&s.length>0&&(o=s),i===e.PreferredCameraType.FrontFacingCamera&&t.length>0&&(o=t),o=o.sort(((e,t)=>e.label.localeCompare(t.label)));{let e=0;const i=o.map((e=>{const t=/\b([0-9]+)MP?\b/i.exec(e.label);return null!==t?parseInt(t[1],10):NaN}));if(i.some((e=>isNaN(e)))||(e=i.lastIndexOf(Math.max(...i))),r){let e=null;return e=t.filter((e=>e.deviceId===r))[0],e||(e=s.filter((e=>e.deviceId===r))[0]),e||null}return o[e]}}return null}))}function B(r,i,s=e.PreferredCameraType.BackFacingCamera){return t(this,void 0,void 0,(function*(){const t={audio:!1,video:{width:{min:640,ideal:1920,max:1920},height:{min:480,ideal:1080,max:1080}}};if(""===r.deviceId){t.video.facingMode={ideal:s===e.PreferredCameraType.BackFacingCamera?"environment":"user"}}else t.video.deviceId={exact:r.deviceId};const o=yield navigator.mediaDevices.getUserMedia(t);i.controls=!1,i.srcObject=o;let n=!1;return r.facing===e.PreferredCameraType.FrontFacingCamera&&(i.style.transform="scaleX(-1)",n=!0),n}))}function Y(e){e&&null!==e.srcObject&&(e.srcObject.getTracks().forEach((e=>e.stop())),e.srcObject=null)}var z,Z;let x;(z=e.ImageOrientation||(e.ImageOrientation={}))[z.RotatedLeft90=0]="RotatedLeft90",z[z.NoRotation=1]="NoRotation",z[z.RotatedRight90=2]="RotatedRight90",z[z.Rotated180=3]="Rotated180",(Z=e.RecognizerResultState||(e.RecognizerResultState={}))[Z.Empty=0]="Empty",Z[Z.Uncertain=1]="Uncertain",Z[Z.Valid=2]="Valid",Z[Z.StageValid=3]="StageValid";class J{constructor(e,t,r){this.imageData=e,this.orientation=t,this.videoFrame=r}}function j(t){let r,i,s=!1;if(t instanceof HTMLVideoElement)r=t.videoWidth,i=t.videoHeight,s=!0;else if(t instanceof HTMLImageElement)r=t.naturalWidth,i=t.naturalHeight;else{if(t instanceof SVGImageElement)throw new h(K.svgUnsupported);r=t.width,i=t.height}x=x||document.createElement("canvas"),x.width=r,x.height=i;const o=x.getContext("2d");if(!o)throw new h(K.canvasMissing);o.drawImage(t,0,0,x.width,x.height);const n=o.getImageData(0,0,x.width,x.height);return new J(n,e.ImageOrientation.NoRotation,s)}var Q,X;(Q=e.LicenseTokenState||(e.LicenseTokenState={}))[Q.Invalid=0]="Invalid",Q[Q.RequiresServerPermission=1]="RequiresServerPermission",Q[Q.Valid=2]="Valid",(X=e.LicenseErrorType||(e.LicenseErrorType={})).LicenseTokenStateInvalid="LICENSE_TOKEN_STATE_INVALID",X.NetworkError="NETWORK_ERROR",X.RemoteLock="REMOTE_LOCK",X.PermissionExpired="PERMISSION_EXPIRED",X.PayloadCorrupted="PAYLOAD_CORRUPTED",X.PayloadSignatureVerificationFailed="PAYLOAD_SIGNATURE_VERIFICATION_FAILED",X.IncorrectTokenState="INCORRECT_TOKEN_STATE";function q(e){return{licenseId:e.licenseId,licensee:e.licensee,packageName:e.packageName,platform:"Browser",sdkName:e.sdkName,sdkVersion:e.sdkVersion}}var $,ee,te,re;function ie(r,i){return t(this,void 0,void 0,(function*(){try{const t=yield fetch("https://baltazar.microblink.com/api/v1/status/check",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-cache",body:JSON.stringify(q(r))});if(t.ok){const e=""+(yield t.text());return i.submitServerPermission(e)}return{status:e.ServerPermissionSubmitResultStatus.NetworkError,lease:0,networkErrorDescription:"Server responded with status "+t.status}}catch(t){return{status:e.ServerPermissionSubmitResultStatus.NetworkError,lease:0,networkErrorDescription:"Unexpected error: "+JSON.stringify(t)}}}))}($=e.ServerPermissionSubmitResultStatus||(e.ServerPermissionSubmitResultStatus={}))[$.Ok=0]="Ok",$[$.NetworkError=1]="NetworkError",$[$.RemoteLock=2]="RemoteLock",$[$.PermissionExpired=3]="PermissionExpired",$[$.PayloadCorrupted=4]="PayloadCorrupted",$[$.PayloadSignatureVerificationFailed=5]="PayloadSignatureVerificationFailed",$[$.IncorrectTokenState=6]="IncorrectTokenState",(ee=e.DetectionStatus||(e.DetectionStatus={}))[ee.Fail=0]="Fail",ee[ee.Success=1]="Success",ee[ee.CameraTooHigh=2]="CameraTooHigh",ee[ee.FallbackSuccess=3]="FallbackSuccess",ee[ee.Partial=4]="Partial",ee[ee.CameraAtAngle=5]="CameraAtAngle",ee[ee.CameraTooNear=6]="CameraTooNear",ee[ee.DocumentTooCloseToEdge=7]="DocumentTooCloseToEdge",(te=e.NotSupportedReason||(e.NotSupportedReason={})).MediaDevicesNotSupported="MediaDevicesNotSupported",te.CameraNotFound="CameraNotFound",te.CameraNotAllowed="CameraNotAllowed",te.CameraInUse="CameraInUse",te.CameraNotAvailable="CameraNotAvailable",te.VideoElementNotProvided="VideoElementNotProvided",(re=e.VideoRecognitionMode||(e.VideoRecognitionMode={}))[re.Recognition=0]="Recognition",re[re.RecognitionTest=1]="RecognitionTest",re[re.DetectionTest=2]="DetectionTest";class se{constructor(t,r,i=!1,s=!1,o=null){this.deviceId=null,this.videoFeed=null,this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.recognitionTimeoutMs=2e4,this.timeoutID=0,this.videoRecognitionMode=e.VideoRecognitionMode.Recognition,this.onScanningDone=null,this.allowManualVideoPlayout=!1,this.cameraFlipped=!1,this.shouldReleaseVideoFeed=!1,this.videoFeed=t,this.recognizerRunner=r,this.cameraFlipped=i,this.allowManualVideoPlayout=s,this.deviceId=o}static createVideoRecognizerFromCameraStream(r,i,s=null,o=e.PreferredCameraType.BackFacingCamera){return t(this,void 0,void 0,(function*(){return new Promise(((n,a)=>t(this,void 0,void 0,(function*(){if(r&&r instanceof Element)if(navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia)try{const t=yield k(s,o);if(null===t)return void a(new h(p.cameraMissing,{reason:e.NotSupportedReason.CameraNotFound}));const A=yield B(t,r,o);yield i.setCameraPreviewMirrored(A),n(new se(r,i,A,!1,t.deviceId))}catch(t){let r=e.NotSupportedReason.CameraInUse,i=e.ErrorCodes.VIDEO_RECOGNIZER_CAMERA_IN_USE;switch(t.name){case"NotFoundError":case"OverconstrainedError":r=e.NotSupportedReason.CameraNotFound,i=e.ErrorCodes.VIDEO_RECOGNIZER_CAMERA_MISSING;break;case"NotAllowedError":case"SecurityError":r=e.NotSupportedReason.CameraNotAllowed,i=e.ErrorCodes.VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED;break;case"AbortError":case"NotReadableError":r=e.NotSupportedReason.CameraNotAvailable,i=e.ErrorCodes.VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE;break;case"TypeError":throw t}a(new h({message:t.message,code:i},{reason:r}))}else a(new h(p.mediaDevicesUnsupported,{reason:e.NotSupportedReason.MediaDevicesNotSupported}));else a(new h(p.elementMissing,{reason:e.NotSupportedReason.VideoElementNotProvided}))}))))}))}static createVideoRecognizerFromVideoPath(e,r,i){return t(this,void 0,void 0,(function*(){return new Promise((t=>{r.src=e,r.currentTime=0,r.onended=()=>{s.cancelRecognition()};const s=new se(r,i);t(s)}))}))}flipCamera(){return t(this,void 0,void 0,(function*(){this.videoFeed&&(this.cameraFlipped?(this.videoFeed.style.transform="scaleX(1)",this.cameraFlipped=!1):(this.videoFeed.style.transform="scaleX(-1)",this.cameraFlipped=!0),yield this.recognizerRunner.setCameraPreviewMirrored(this.cameraFlipped))}))}isCameraFlipped(){return this.cameraFlipped}setVideoRecognitionMode(r){return t(this,void 0,void 0,(function*(){this.videoRecognitionMode=r;const t=this.videoRecognitionMode===e.VideoRecognitionMode.DetectionTest;yield this.recognizerRunner.setDetectionOnlyMode(t)}))}startRecognition(e,t=2e4){return new Promise(((r,i)=>{null!==this.videoFeed?this.videoFeed.paused?(this.cancelled=!1,this.recognitionPaused=!1,this.clearTimeout(),this.recognitionTimeoutMs=t,this.onScanningDone=e,this.recognizerRunner.setClearTimeoutCallback({onClearTimeout:()=>this.clearTimeout()}),this.videoFeed.play().then((()=>this.playPauseEvent().then((()=>r())).catch((e=>i(e)))),(e=>{this.allowManualVideoPlayout?this.videoFeed&&(this.videoFeed.controls=!0,this.videoFeed.addEventListener("play",(()=>{this.playPauseEvent().then().catch((e=>i(e)))})),this.videoFeed.addEventListener("pause",(()=>{this.playPauseEvent().then().catch((e=>i(e)))}))):i(new h(p.playRequestInterrupted,e))}))):i(new h(p.videoFeedNotPaused)):i(new h(p.videoFeedReleased))}))}recognize(e=2e4){return new Promise(((t,r)=>{try{this.startRecognition((e=>{this.pauseVideoFeed(),t(e)}),e).then().catch((e=>r(e)))}catch(e){r(e)}}))}cancelRecognition(){this.cancelled=!0}pauseVideoFeed(){this.pauseRecognition(),this.videoFeed&&this.videoFeed.pause()}pauseRecognition(){this.recognitionPaused=!0}resetRecognizers(e){return t(this,void 0,void 0,(function*(){yield this.recognizerRunner.resetRecognizers(e)}))}getRecognizerRunner(){return this.recognizerRunner}resumeRecognition(e){return new Promise(((t,r)=>{this.cancelled=!1,this.timedOut=!1,this.recognitionPaused=!1,this.videoFeed&&this.videoFeed.paused?r(new h(p.feedPaused)):setTimeout((()=>{e?this.resetRecognizers(!0).then((()=>{this.recognitionLoop().then((()=>t())).catch((e=>r(e)))})).catch((()=>{r(new h(p.recognizersResetFailure))})):this.recognitionLoop().then((()=>t())).catch((e=>r(e)))}),1)}))}releaseVideoFeed(){var e,t;this.videoFeed&&(null===(e=this.videoFeed)||void 0===e?void 0:e.readyState)>=(null===(t=this.videoFeed)||void 0===t?void 0:t.HAVE_CURRENT_DATA)?(this.videoFeed.paused||this.cancelRecognition(),Y(this.videoFeed),this.videoFeed=null,this.shouldReleaseVideoFeed=!1):this.shouldReleaseVideoFeed=!0}changeCameraDevice(e){return new Promise(((t,r)=>{null!==this.videoFeed?(this.pauseRecognition(),Y(this.videoFeed),B(e,this.videoFeed).then((()=>{null!==this.videoFeed?this.videoFeed.play().then((()=>{this.resumeRecognition(!0),t()}),(e=>{this.allowManualVideoPlayout?this.videoFeed?this.videoFeed.controls=!0:r(new h(p.feedMissing)):r(new h(p.playRequestInterrupted,e))})):r(new h(p.feedMissing))})).catch((e=>r(e)))):r(new h(p.feedMissing))}))}playPauseEvent(){return new Promise(((e,t)=>{if(this.videoFeed&&this.videoFeed.paused)return this.cancelRecognition(),void e();this.resumeRecognition(!0).then((()=>e())).catch((e=>t(e)))}))}recognitionLoop(){return new Promise(((t,r)=>{if(!this.videoFeed)return void r(new h(p.feedMissing));if(this.shouldReleaseVideoFeed&&this.videoFeed.readyState>this.videoFeed.HAVE_CURRENT_DATA)return this.releaseVideoFeed(),void t();const i=j(this.videoFeed);this.recognizerRunner.processImage(i).then((i=>{const s=()=>{this.recognitionPaused?t():setTimeout((()=>{this.recognitionLoop().then((()=>t())).catch((e=>r(e)))}),1)};if(i===e.RecognizerResultState.Valid||this.cancelled||this.timedOut){if(this.videoRecognitionMode!==e.VideoRecognitionMode.Recognition&&!this.cancelled)return void this.recognizerRunner.resetRecognizers(!0).then((()=>{this.clearTimeout(),s()})).catch((e=>r(e)));this.clearTimeout(),this.onScanningDone&&this.onScanningDone(i)}else{if(i===e.RecognizerResultState.Uncertain)return 0===this.timeoutID&&(this.timeoutID=window.setTimeout((()=>{this.timedOut=!0}),this.recognitionTimeoutMs)),void s();if(i===e.RecognizerResultState.StageValid)return this.clearTimeout(),void s()}s()})).catch((e=>r(e)))}))}clearTimeout(){this.timeoutID>0&&(window.clearTimeout(this.timeoutID),this.timeoutID=0)}}function oe(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}var ne,ae,Ae,Ee,Re,Ie,ce,Ne,de,le,Se;(ne=e.BarcodeFormat||(e.BarcodeFormat={}))[ne.NONE=0]="NONE",ne[ne.QR_CODE=1]="QR_CODE",ne[ne.DATA_MATRIX=2]="DATA_MATRIX",ne[ne.UPC_E=3]="UPC_E",ne[ne.UPC_A=4]="UPC_A",ne[ne.EAN_8=5]="EAN_8",ne[ne.EAN_13=6]="EAN_13",ne[ne.CODE_128=7]="CODE_128",ne[ne.CODE_39=8]="CODE_39",ne[ne.ITF=9]="ITF",ne[ne.AZTEC_BARCODE=10]="AZTEC_BARCODE",ne[ne.PDF417_BARCODE=11]="PDF417_BARCODE",(ae=e.AnonymizationMode||(e.AnonymizationMode={}))[ae.None=0]="None",ae[ae.ImageOnly=1]="ImageOnly",ae[ae.ResultFieldsOnly=2]="ResultFieldsOnly",ae[ae.FullResult=3]="FullResult";class _e{constructor(){this.enableMrzId=!0,this.enableMrzPassport=!0,this.enableMrzVisa=!0,this.enablePhotoId=!0,this.enableBarcodeId=!0,this.enableFullDocumentRecognition=!0}}class Oe{constructor(e=0,t=0,r=0,i=0){this.upFactor=0,this.downFactor=0,this.leftFactor=0,this.rightFactor=0,this.checkExtensionFactor(e),this.checkExtensionFactor(t),this.checkExtensionFactor(r),this.checkExtensionFactor(i),this.upFactor=e,this.downFactor=t,this.leftFactor=r,this.rightFactor=i}checkExtensionFactor(e){if(e>1||-1>e)throw Error("Extension factor must be in range [-1.0, 1.0]")}}function Ce(e){if(100>e||e>400)throw Error("DPI must be from interval [100, 400]")}(Ae=e.BarcodeElementKey||(e.BarcodeElementKey={}))[Ae.DocumentType=0]="DocumentType",Ae[Ae.StandardVersionNumber=1]="StandardVersionNumber",Ae[Ae.CustomerFamilyName=2]="CustomerFamilyName",Ae[Ae.CustomerFirstName=3]="CustomerFirstName",Ae[Ae.CustomerFullName=4]="CustomerFullName",Ae[Ae.DateOfBirth=5]="DateOfBirth",Ae[Ae.Sex=6]="Sex",Ae[Ae.EyeColor=7]="EyeColor",Ae[Ae.AddressStreet=8]="AddressStreet",Ae[Ae.AddressCity=9]="AddressCity",Ae[Ae.AddressJurisdictionCode=10]="AddressJurisdictionCode",Ae[Ae.AddressPostalCode=11]="AddressPostalCode",Ae[Ae.FullAddress=12]="FullAddress",Ae[Ae.Height=13]="Height",Ae[Ae.HeightIn=14]="HeightIn",Ae[Ae.HeightCm=15]="HeightCm",Ae[Ae.CustomerMiddleName=16]="CustomerMiddleName",Ae[Ae.HairColor=17]="HairColor",Ae[Ae.NameSuffix=18]="NameSuffix",Ae[Ae.AKAFullName=19]="AKAFullName",Ae[Ae.AKAFamilyName=20]="AKAFamilyName",Ae[Ae.AKAGivenName=21]="AKAGivenName",Ae[Ae.AKASuffixName=22]="AKASuffixName",Ae[Ae.WeightRange=23]="WeightRange",Ae[Ae.WeightPounds=24]="WeightPounds",Ae[Ae.WeightKilograms=25]="WeightKilograms",Ae[Ae.CustomerIdNumber=26]="CustomerIdNumber",Ae[Ae.FamilyNameTruncation=27]="FamilyNameTruncation",Ae[Ae.FirstNameTruncation=28]="FirstNameTruncation",Ae[Ae.MiddleNameTruncation=29]="MiddleNameTruncation",Ae[Ae.PlaceOfBirth=30]="PlaceOfBirth",Ae[Ae.AddressStreet2=31]="AddressStreet2",Ae[Ae.RaceEthnicity=32]="RaceEthnicity",Ae[Ae.NamePrefix=33]="NamePrefix",Ae[Ae.CountryIdentification=34]="CountryIdentification",Ae[Ae.ResidenceStreetAddress=35]="ResidenceStreetAddress",Ae[Ae.ResidenceStreetAddress2=36]="ResidenceStreetAddress2",Ae[Ae.ResidenceCity=37]="ResidenceCity",Ae[Ae.ResidenceJurisdictionCode=38]="ResidenceJurisdictionCode",Ae[Ae.ResidencePostalCode=39]="ResidencePostalCode",Ae[Ae.ResidenceFullAddress=40]="ResidenceFullAddress",Ae[Ae.Under18=41]="Under18",Ae[Ae.Under19=42]="Under19",Ae[Ae.Under21=43]="Under21",Ae[Ae.SocialSecurityNumber=44]="SocialSecurityNumber",Ae[Ae.AKASocialSecurityNumber=45]="AKASocialSecurityNumber",Ae[Ae.AKAMiddleName=46]="AKAMiddleName",Ae[Ae.AKAPrefixName=47]="AKAPrefixName",Ae[Ae.OrganDonor=48]="OrganDonor",Ae[Ae.Veteran=49]="Veteran",Ae[Ae.AKADateOfBirth=50]="AKADateOfBirth",Ae[Ae.IssuerIdentificationNumber=51]="IssuerIdentificationNumber",Ae[Ae.DocumentExpirationDate=52]="DocumentExpirationDate",Ae[Ae.JurisdictionVersionNumber=53]="JurisdictionVersionNumber",Ae[Ae.JurisdictionVehicleClass=54]="JurisdictionVehicleClass",Ae[Ae.JurisdictionRestrictionCodes=55]="JurisdictionRestrictionCodes",Ae[Ae.JurisdictionEndorsementCodes=56]="JurisdictionEndorsementCodes",Ae[Ae.DocumentIssueDate=57]="DocumentIssueDate",Ae[Ae.FederalCommercialVehicleCodes=58]="FederalCommercialVehicleCodes",Ae[Ae.IssuingJurisdiction=59]="IssuingJurisdiction",Ae[Ae.StandardVehicleClassification=60]="StandardVehicleClassification",Ae[Ae.IssuingJurisdictionName=61]="IssuingJurisdictionName",Ae[Ae.StandardEndorsementCode=62]="StandardEndorsementCode",Ae[Ae.StandardRestrictionCode=63]="StandardRestrictionCode",Ae[Ae.JurisdictionVehicleClassificationDescription=64]="JurisdictionVehicleClassificationDescription",Ae[Ae.JurisdictionEndorsmentCodeDescription=65]="JurisdictionEndorsmentCodeDescription",Ae[Ae.JurisdictionRestrictionCodeDescription=66]="JurisdictionRestrictionCodeDescription",Ae[Ae.InventoryControlNumber=67]="InventoryControlNumber",Ae[Ae.CardRevisionDate=68]="CardRevisionDate",Ae[Ae.DocumentDiscriminator=69]="DocumentDiscriminator",Ae[Ae.LimitedDurationDocument=70]="LimitedDurationDocument",Ae[Ae.AuditInformation=71]="AuditInformation",Ae[Ae.ComplianceType=72]="ComplianceType",Ae[Ae.IssueTimestamp=73]="IssueTimestamp",Ae[Ae.PermitExpirationDate=74]="PermitExpirationDate",Ae[Ae.PermitIdentifier=75]="PermitIdentifier",Ae[Ae.PermitIssueDate=76]="PermitIssueDate",Ae[Ae.NumberOfDuplicates=77]="NumberOfDuplicates",Ae[Ae.HAZMATExpirationDate=78]="HAZMATExpirationDate",Ae[Ae.MedicalIndicator=79]="MedicalIndicator",Ae[Ae.NonResident=80]="NonResident",Ae[Ae.UniqueCustomerId=81]="UniqueCustomerId",Ae[Ae.DataDiscriminator=82]="DataDiscriminator",Ae[Ae.DocumentExpirationMonth=83]="DocumentExpirationMonth",Ae[Ae.DocumentNonexpiring=84]="DocumentNonexpiring",Ae[Ae.SecurityVersion=85]="SecurityVersion",Ae[Ae.Count=86]="Count",(Ee=e.Country||(e.Country={}))[Ee.NONE=0]="NONE",Ee[Ee.ALBANIA=1]="ALBANIA",Ee[Ee.ALGERIA=2]="ALGERIA",Ee[Ee.ARGENTINA=3]="ARGENTINA",Ee[Ee.AUSTRALIA=4]="AUSTRALIA",Ee[Ee.AUSTRIA=5]="AUSTRIA",Ee[Ee.AZERBAIJAN=6]="AZERBAIJAN",Ee[Ee.BAHRAIN=7]="BAHRAIN",Ee[Ee.BANGLADESH=8]="BANGLADESH",Ee[Ee.BELGIUM=9]="BELGIUM",Ee[Ee.BOSNIA_AND_HERZEGOVINA=10]="BOSNIA_AND_HERZEGOVINA",Ee[Ee.BRUNEI=11]="BRUNEI",Ee[Ee.BULGARIA=12]="BULGARIA",Ee[Ee.CAMBODIA=13]="CAMBODIA",Ee[Ee.CANADA=14]="CANADA",Ee[Ee.CHILE=15]="CHILE",Ee[Ee.COLOMBIA=16]="COLOMBIA",Ee[Ee.COSTA_RICA=17]="COSTA_RICA",Ee[Ee.CROATIA=18]="CROATIA",Ee[Ee.CYPRUS=19]="CYPRUS",Ee[Ee.CZECHIA=20]="CZECHIA",Ee[Ee.DENMARK=21]="DENMARK",Ee[Ee.DOMINICAN_REPUBLIC=22]="DOMINICAN_REPUBLIC",Ee[Ee.EGYPT=23]="EGYPT",Ee[Ee.ESTONIA=24]="ESTONIA",Ee[Ee.FINLAND=25]="FINLAND",Ee[Ee.FRANCE=26]="FRANCE",Ee[Ee.GEORGIA=27]="GEORGIA",Ee[Ee.GERMANY=28]="GERMANY",Ee[Ee.GHANA=29]="GHANA",Ee[Ee.GREECE=30]="GREECE",Ee[Ee.GUATEMALA=31]="GUATEMALA",Ee[Ee.HONG_KONG=32]="HONG_KONG",Ee[Ee.HUNGARY=33]="HUNGARY",Ee[Ee.INDIA=34]="INDIA",Ee[Ee.INDONESIA=35]="INDONESIA",Ee[Ee.IRELAND=36]="IRELAND",Ee[Ee.ISRAEL=37]="ISRAEL",Ee[Ee.ITALY=38]="ITALY",Ee[Ee.JORDAN=39]="JORDAN",Ee[Ee.KAZAKHSTAN=40]="KAZAKHSTAN",Ee[Ee.KENYA=41]="KENYA",Ee[Ee.KOSOVO=42]="KOSOVO",Ee[Ee.KUWAIT=43]="KUWAIT",Ee[Ee.LATVIA=44]="LATVIA",Ee[Ee.LITHUANIA=45]="LITHUANIA",Ee[Ee.MALAYSIA=46]="MALAYSIA",Ee[Ee.MALDIVES=47]="MALDIVES",Ee[Ee.MALTA=48]="MALTA",Ee[Ee.MAURITIUS=49]="MAURITIUS",Ee[Ee.MEXICO=50]="MEXICO",Ee[Ee.MOROCCO=51]="MOROCCO",Ee[Ee.NETHERLANDS=52]="NETHERLANDS",Ee[Ee.NEW_ZEALAND=53]="NEW_ZEALAND",Ee[Ee.NIGERIA=54]="NIGERIA",Ee[Ee.PAKISTAN=55]="PAKISTAN",Ee[Ee.PANAMA=56]="PANAMA",Ee[Ee.PARAGUAY=57]="PARAGUAY",Ee[Ee.PHILIPPINES=58]="PHILIPPINES",Ee[Ee.POLAND=59]="POLAND",Ee[Ee.PORTUGAL=60]="PORTUGAL",Ee[Ee.PUERTO_RICO=61]="PUERTO_RICO",Ee[Ee.QATAR=62]="QATAR",Ee[Ee.ROMANIA=63]="ROMANIA",Ee[Ee.RUSSIA=64]="RUSSIA",Ee[Ee.SAUDI_ARABIA=65]="SAUDI_ARABIA",Ee[Ee.SERBIA=66]="SERBIA",Ee[Ee.SINGAPORE=67]="SINGAPORE",Ee[Ee.SLOVAKIA=68]="SLOVAKIA",Ee[Ee.SLOVENIA=69]="SLOVENIA",Ee[Ee.SOUTH_AFRICA=70]="SOUTH_AFRICA",Ee[Ee.SPAIN=71]="SPAIN",Ee[Ee.SWEDEN=72]="SWEDEN",Ee[Ee.SWITZERLAND=73]="SWITZERLAND",Ee[Ee.TAIWAN=74]="TAIWAN",Ee[Ee.THAILAND=75]="THAILAND",Ee[Ee.TUNISIA=76]="TUNISIA",Ee[Ee.TURKEY=77]="TURKEY",Ee[Ee.UAE=78]="UAE",Ee[Ee.UGANDA=79]="UGANDA",Ee[Ee.UK=80]="UK",Ee[Ee.UKRAINE=81]="UKRAINE",Ee[Ee.USA=82]="USA",Ee[Ee.VIETNAM=83]="VIETNAM",Ee[Ee.BRAZIL=84]="BRAZIL",Ee[Ee.NORWAY=85]="NORWAY",Ee[Ee.OMAN=86]="OMAN",Ee[Ee.ECUADOR=87]="ECUADOR",Ee[Ee.EL_SALVADOR=88]="EL_SALVADOR",Ee[Ee.SRI_LANKA=89]="SRI_LANKA",Ee[Ee.PERU=90]="PERU",Ee[Ee.URUGUAY=91]="URUGUAY",Ee[Ee.BAHAMAS=92]="BAHAMAS",Ee[Ee.BERMUDA=93]="BERMUDA",Ee[Ee.BOLIVIA=94]="BOLIVIA",Ee[Ee.CHINA=95]="CHINA",Ee[Ee.EUROPEAN_UNION=96]="EUROPEAN_UNION",Ee[Ee.HAITI=97]="HAITI",Ee[Ee.HONDURAS=98]="HONDURAS",Ee[Ee.ICELAND=99]="ICELAND",Ee[Ee.JAPAN=100]="JAPAN",Ee[Ee.LUXEMBOURG=101]="LUXEMBOURG",Ee[Ee.MONTENEGRO=102]="MONTENEGRO",Ee[Ee.NICARAGUA=103]="NICARAGUA",Ee[Ee.SOUTH_KOREA=104]="SOUTH_KOREA",Ee[Ee.VENEZUELA=105]="VENEZUELA",Ee[Ee.AFGHANISTAN=106]="AFGHANISTAN",Ee[Ee.ALAND_ISLANDS=107]="ALAND_ISLANDS",Ee[Ee.AMERICAN_SAMOA=108]="AMERICAN_SAMOA",Ee[Ee.ANDORRA=109]="ANDORRA",Ee[Ee.ANGOLA=110]="ANGOLA",Ee[Ee.ANGUILLA=111]="ANGUILLA",Ee[Ee.ANTARCTICA=112]="ANTARCTICA",Ee[Ee.ANTIGUA_AND_BARBUDA=113]="ANTIGUA_AND_BARBUDA",Ee[Ee.ARMENIA=114]="ARMENIA",Ee[Ee.ARUBA=115]="ARUBA",Ee[Ee.BAILIWICK_OF_GUERNSEY=116]="BAILIWICK_OF_GUERNSEY",Ee[Ee.BAILIWICK_OF_JERSEY=117]="BAILIWICK_OF_JERSEY",Ee[Ee.BARBADOS=118]="BARBADOS",Ee[Ee.BELARUS=119]="BELARUS",Ee[Ee.BELIZE=120]="BELIZE",Ee[Ee.BENIN=121]="BENIN",Ee[Ee.BHUTAN=122]="BHUTAN",Ee[Ee.BONAIRE_SAINT_EUSTATIUS_AND_SABA=123]="BONAIRE_SAINT_EUSTATIUS_AND_SABA",Ee[Ee.BOTSWANA=124]="BOTSWANA",Ee[Ee.BOUVET_ISLAND=125]="BOUVET_ISLAND",Ee[Ee.BRITISH_INDIAN_OCEAN_TERRITORY=126]="BRITISH_INDIAN_OCEAN_TERRITORY",Ee[Ee.BURKINA_FASO=127]="BURKINA_FASO",Ee[Ee.BURUNDI=128]="BURUNDI",Ee[Ee.CAMEROON=129]="CAMEROON",Ee[Ee.CAPE_VERDE=130]="CAPE_VERDE",Ee[Ee.CARIBBEAN_NETHERLANDS=131]="CARIBBEAN_NETHERLANDS",Ee[Ee.CAYMAN_ISLANDS=132]="CAYMAN_ISLANDS",Ee[Ee.CENTRAL_AFRICAN_REPUBLIC=133]="CENTRAL_AFRICAN_REPUBLIC",Ee[Ee.CHAD=134]="CHAD",Ee[Ee.CHRISTMAS_ISLAND=135]="CHRISTMAS_ISLAND",Ee[Ee.COCOS_ISLANDS=136]="COCOS_ISLANDS",Ee[Ee.COMOROS=137]="COMOROS",Ee[Ee.CONGO=138]="CONGO",Ee[Ee.COOK_ISLANDS=139]="COOK_ISLANDS",Ee[Ee.CUBA=140]="CUBA",Ee[Ee.CURACAO=141]="CURACAO",Ee[Ee.DEMOCRATIC_REPUBLIC_OF_THE_CONGO=142]="DEMOCRATIC_REPUBLIC_OF_THE_CONGO",Ee[Ee.DJIBOUTI=143]="DJIBOUTI",Ee[Ee.DOMINICA=144]="DOMINICA",Ee[Ee.EAST_TIMOR=145]="EAST_TIMOR",Ee[Ee.EQUATORIAL_GUINEA=146]="EQUATORIAL_GUINEA",Ee[Ee.ERITREA=147]="ERITREA",Ee[Ee.ETHIOPIA=148]="ETHIOPIA",Ee[Ee.FALKLAND_ISLANDS=149]="FALKLAND_ISLANDS",Ee[Ee.FAROE_ISLANDS=150]="FAROE_ISLANDS",Ee[Ee.FEDERATED_STATES_OF_MICRONESIA=151]="FEDERATED_STATES_OF_MICRONESIA",Ee[Ee.FIJI=152]="FIJI",Ee[Ee.FRENCH_GUIANA=153]="FRENCH_GUIANA",Ee[Ee.FRENCH_POLYNESIA=154]="FRENCH_POLYNESIA",Ee[Ee.FRENCH_SOUTHERN_TERRITORIES=155]="FRENCH_SOUTHERN_TERRITORIES",Ee[Ee.GABON=156]="GABON",Ee[Ee.GAMBIA=157]="GAMBIA",Ee[Ee.GIBRALTAR=158]="GIBRALTAR",Ee[Ee.GREENLAND=159]="GREENLAND",Ee[Ee.GRENADA=160]="GRENADA",Ee[Ee.GUADELOUPE=161]="GUADELOUPE",Ee[Ee.GUAM=162]="GUAM",Ee[Ee.GUINEA=163]="GUINEA",Ee[Ee.GUINEA_BISSAU=164]="GUINEA_BISSAU",Ee[Ee.GUYANA=165]="GUYANA",Ee[Ee.HEARD_ISLAND_AND_MCDONALD_ISLANDS=166]="HEARD_ISLAND_AND_MCDONALD_ISLANDS",Ee[Ee.IRAN=167]="IRAN",Ee[Ee.IRAQ=168]="IRAQ",Ee[Ee.ISLE_OF_MAN=169]="ISLE_OF_MAN",Ee[Ee.IVORY_COAST=170]="IVORY_COAST",Ee[Ee.JAMAICA=171]="JAMAICA",Ee[Ee.KIRIBATI=172]="KIRIBATI",Ee[Ee.KYRGYZSTAN=173]="KYRGYZSTAN",Ee[Ee.LAOS=174]="LAOS",Ee[Ee.LEBANON=175]="LEBANON",Ee[Ee.LESOTHO=176]="LESOTHO",Ee[Ee.LIBERIA=177]="LIBERIA",Ee[Ee.LIBYA=178]="LIBYA",Ee[Ee.LIECHTENSTEIN=179]="LIECHTENSTEIN",Ee[Ee.MACAU=180]="MACAU",Ee[Ee.MADAGASCAR=181]="MADAGASCAR",Ee[Ee.MALAWI=182]="MALAWI",Ee[Ee.MALI=183]="MALI",Ee[Ee.MARSHALL_ISLANDS=184]="MARSHALL_ISLANDS",Ee[Ee.MARTINIQUE=185]="MARTINIQUE",Ee[Ee.MAURITANIA=186]="MAURITANIA",Ee[Ee.MAYOTTE=187]="MAYOTTE",Ee[Ee.MOLDOVA=188]="MOLDOVA",Ee[Ee.MONACO=189]="MONACO",Ee[Ee.MONGOLIA=190]="MONGOLIA",Ee[Ee.MONTSERRAT=191]="MONTSERRAT",Ee[Ee.MOZAMBIQUE=192]="MOZAMBIQUE",Ee[Ee.MYANMAR=193]="MYANMAR",Ee[Ee.NAMIBIA=194]="NAMIBIA",Ee[Ee.NAURU=195]="NAURU",Ee[Ee.NEPAL=196]="NEPAL",Ee[Ee.NEW_CALEDONIA=197]="NEW_CALEDONIA",Ee[Ee.NIGER=198]="NIGER",Ee[Ee.NIUE=199]="NIUE",Ee[Ee.NORFOLK_ISLAND=200]="NORFOLK_ISLAND",Ee[Ee.NORTHERN_CYPRUS=201]="NORTHERN_CYPRUS",Ee[Ee.NORTHERN_MARIANA_ISLANDS=202]="NORTHERN_MARIANA_ISLANDS",Ee[Ee.NORTH_KOREA=203]="NORTH_KOREA",Ee[Ee.NORTH_MACEDONIA=204]="NORTH_MACEDONIA",Ee[Ee.PALAU=205]="PALAU",Ee[Ee.PALESTINE=206]="PALESTINE",Ee[Ee.PAPUA_NEW_GUINEA=207]="PAPUA_NEW_GUINEA",Ee[Ee.PITCAIRN=208]="PITCAIRN",Ee[Ee.REUNION=209]="REUNION",Ee[Ee.RWANDA=210]="RWANDA",Ee[Ee.SAINT_BARTHELEMY=211]="SAINT_BARTHELEMY",Ee[Ee.SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA=212]="SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA",Ee[Ee.SAINT_KITTS_AND_NEVIS=213]="SAINT_KITTS_AND_NEVIS",Ee[Ee.SAINT_LUCIA=214]="SAINT_LUCIA",Ee[Ee.SAINT_MARTIN=215]="SAINT_MARTIN",Ee[Ee.SAINT_PIERRE_AND_MIQUELON=216]="SAINT_PIERRE_AND_MIQUELON",Ee[Ee.SAINT_VINCENT_AND_THE_GRENADINES=217]="SAINT_VINCENT_AND_THE_GRENADINES",Ee[Ee.SAMOA=218]="SAMOA",Ee[Ee.SAN_MARINO=219]="SAN_MARINO",Ee[Ee.SAO_TOME_AND_PRINCIPE=220]="SAO_TOME_AND_PRINCIPE",Ee[Ee.SENEGAL=221]="SENEGAL",Ee[Ee.SEYCHELLES=222]="SEYCHELLES",Ee[Ee.SIERRA_LEONE=223]="SIERRA_LEONE",Ee[Ee.SINT_MAARTEN=224]="SINT_MAARTEN",Ee[Ee.SOLOMON_ISLANDS=225]="SOLOMON_ISLANDS",Ee[Ee.SOMALIA=226]="SOMALIA",Ee[Ee.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS=227]="SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS",Ee[Ee.SOUTH_SUDAN=228]="SOUTH_SUDAN",Ee[Ee.SUDAN=229]="SUDAN",Ee[Ee.SURINAME=230]="SURINAME",Ee[Ee.SVALBARD_AND_JAN_MAYEN=231]="SVALBARD_AND_JAN_MAYEN",Ee[Ee.ESWATINI=232]="ESWATINI",Ee[Ee.SYRIA=233]="SYRIA",Ee[Ee.TAJIKISTAN=234]="TAJIKISTAN",Ee[Ee.TANZANIA=235]="TANZANIA",Ee[Ee.TOGO=236]="TOGO",Ee[Ee.TOKELAU=237]="TOKELAU",Ee[Ee.TONGA=238]="TONGA",Ee[Ee.TRINIDAD_AND_TOBAGO=239]="TRINIDAD_AND_TOBAGO",Ee[Ee.TURKMENISTAN=240]="TURKMENISTAN",Ee[Ee.TURKS_AND_CAICOS_ISLANDS=241]="TURKS_AND_CAICOS_ISLANDS",Ee[Ee.TUVALU=242]="TUVALU",Ee[Ee.UNITED_STATES_MINOR_OUTLYING_ISLANDS=243]="UNITED_STATES_MINOR_OUTLYING_ISLANDS",Ee[Ee.UZBEKISTAN=244]="UZBEKISTAN",Ee[Ee.VANUATU=245]="VANUATU",Ee[Ee.VATICAN_CITY=246]="VATICAN_CITY",Ee[Ee.VIRGIN_ISLANDS_BRITISH=247]="VIRGIN_ISLANDS_BRITISH",Ee[Ee.VIRGIN_ISLANDS_US=248]="VIRGIN_ISLANDS_US",Ee[Ee.WALLIS_AND_FUTUNA=249]="WALLIS_AND_FUTUNA",Ee[Ee.WESTERN_SAHARA=250]="WESTERN_SAHARA",Ee[Ee.YEMEN=251]="YEMEN",Ee[Ee.YUGOSLAVIA=252]="YUGOSLAVIA",Ee[Ee.ZAMBIA=253]="ZAMBIA",Ee[Ee.ZIMBABWE=254]="ZIMBABWE",Ee[Ee.COUNT=255]="COUNT",(Re=e.Region||(e.Region={}))[Re.NONE=0]="NONE",Re[Re.ALABAMA=1]="ALABAMA",Re[Re.ALASKA=2]="ALASKA",Re[Re.ALBERTA=3]="ALBERTA",Re[Re.ARIZONA=4]="ARIZONA",Re[Re.ARKANSAS=5]="ARKANSAS",Re[Re.AUSTRALIAN_CAPITAL_TERRITORY=6]="AUSTRALIAN_CAPITAL_TERRITORY",Re[Re.BRITISH_COLUMBIA=7]="BRITISH_COLUMBIA",Re[Re.CALIFORNIA=8]="CALIFORNIA",Re[Re.COLORADO=9]="COLORADO",Re[Re.CONNECTICUT=10]="CONNECTICUT",Re[Re.DELAWARE=11]="DELAWARE",Re[Re.DISTRICT_OF_COLUMBIA=12]="DISTRICT_OF_COLUMBIA",Re[Re.FLORIDA=13]="FLORIDA",Re[Re.GEORGIA=14]="GEORGIA",Re[Re.HAWAII=15]="HAWAII",Re[Re.IDAHO=16]="IDAHO",Re[Re.ILLINOIS=17]="ILLINOIS",Re[Re.INDIANA=18]="INDIANA",Re[Re.IOWA=19]="IOWA",Re[Re.KANSAS=20]="KANSAS",Re[Re.KENTUCKY=21]="KENTUCKY",Re[Re.LOUISIANA=22]="LOUISIANA",Re[Re.MAINE=23]="MAINE",Re[Re.MANITOBA=24]="MANITOBA",Re[Re.MARYLAND=25]="MARYLAND",Re[Re.MASSACHUSETTS=26]="MASSACHUSETTS",Re[Re.MICHIGAN=27]="MICHIGAN",Re[Re.MINNESOTA=28]="MINNESOTA",Re[Re.MISSISSIPPI=29]="MISSISSIPPI",Re[Re.MISSOURI=30]="MISSOURI",Re[Re.MONTANA=31]="MONTANA",Re[Re.NEBRASKA=32]="NEBRASKA",Re[Re.NEVADA=33]="NEVADA",Re[Re.NEW_BRUNSWICK=34]="NEW_BRUNSWICK",Re[Re.NEW_HAMPSHIRE=35]="NEW_HAMPSHIRE",Re[Re.NEW_JERSEY=36]="NEW_JERSEY",Re[Re.NEW_MEXICO=37]="NEW_MEXICO",Re[Re.NEW_SOUTH_WALES=38]="NEW_SOUTH_WALES",Re[Re.NEW_YORK=39]="NEW_YORK",Re[Re.NORTHERN_TERRITORY=40]="NORTHERN_TERRITORY",Re[Re.NORTH_CAROLINA=41]="NORTH_CAROLINA",Re[Re.NORTH_DAKOTA=42]="NORTH_DAKOTA",Re[Re.NOVA_SCOTIA=43]="NOVA_SCOTIA",Re[Re.OHIO=44]="OHIO",Re[Re.OKLAHOMA=45]="OKLAHOMA",Re[Re.ONTARIO=46]="ONTARIO",Re[Re.OREGON=47]="OREGON",Re[Re.PENNSYLVANIA=48]="PENNSYLVANIA",Re[Re.QUEBEC=49]="QUEBEC",Re[Re.QUEENSLAND=50]="QUEENSLAND",Re[Re.RHODE_ISLAND=51]="RHODE_ISLAND",Re[Re.SASKATCHEWAN=52]="SASKATCHEWAN",Re[Re.SOUTH_AUSTRALIA=53]="SOUTH_AUSTRALIA",Re[Re.SOUTH_CAROLINA=54]="SOUTH_CAROLINA",Re[Re.SOUTH_DAKOTA=55]="SOUTH_DAKOTA",Re[Re.TASMANIA=56]="TASMANIA",Re[Re.TENNESSEE=57]="TENNESSEE",Re[Re.TEXAS=58]="TEXAS",Re[Re.UTAH=59]="UTAH",Re[Re.VERMONT=60]="VERMONT",Re[Re.VICTORIA=61]="VICTORIA",Re[Re.VIRGINIA=62]="VIRGINIA",Re[Re.WASHINGTON=63]="WASHINGTON",Re[Re.WESTERN_AUSTRALIA=64]="WESTERN_AUSTRALIA",Re[Re.WEST_VIRGINIA=65]="WEST_VIRGINIA",Re[Re.WISCONSIN=66]="WISCONSIN",Re[Re.WYOMING=67]="WYOMING",Re[Re.YUKON=68]="YUKON",Re[Re.CIUDAD_DE_MEXICO=69]="CIUDAD_DE_MEXICO",Re[Re.JALISCO=70]="JALISCO",Re[Re.NEWFOUNDLAND_AND_LABRADOR=71]="NEWFOUNDLAND_AND_LABRADOR",Re[Re.NUEVO_LEON=72]="NUEVO_LEON",Re[Re.BAJA_CALIFORNIA=73]="BAJA_CALIFORNIA",Re[Re.CHIHUAHUA=74]="CHIHUAHUA",Re[Re.GUANAJUATO=75]="GUANAJUATO",Re[Re.GUERRERO=76]="GUERRERO",Re[Re.MEXICO=77]="MEXICO",Re[Re.MICHOACAN=78]="MICHOACAN",Re[Re.NEW_YORK_CITY=79]="NEW_YORK_CITY",Re[Re.TAMAULIPAS=80]="TAMAULIPAS",Re[Re.VERACRUZ=81]="VERACRUZ",Re[Re.CHIAPAS=82]="CHIAPAS",Re[Re.COAHUILA=83]="COAHUILA",Re[Re.DURANGO=84]="DURANGO",Re[Re.GUERRERO_COCULA=85]="GUERRERO_COCULA",Re[Re.GUERRERO_JUCHITAN=86]="GUERRERO_JUCHITAN",Re[Re.GUERRERO_TEPECOACUILCO=87]="GUERRERO_TEPECOACUILCO",Re[Re.GUERRERO_TLACOAPA=88]="GUERRERO_TLACOAPA",Re[Re.GUJARAT=89]="GUJARAT",Re[Re.HIDALGO=90]="HIDALGO",Re[Re.KARNATAKA=91]="KARNATAKA",Re[Re.KERALA=92]="KERALA",Re[Re.KHYBER_PAKHTUNKHWA=93]="KHYBER_PAKHTUNKHWA",Re[Re.MADHYA_PRADESH=94]="MADHYA_PRADESH",Re[Re.MAHARASHTRA=95]="MAHARASHTRA",Re[Re.MORELOS=96]="MORELOS",Re[Re.NAYARIT=97]="NAYARIT",Re[Re.OAXACA=98]="OAXACA",Re[Re.PUEBLA=99]="PUEBLA",Re[Re.PUNJAB=100]="PUNJAB",Re[Re.QUERETARO=101]="QUERETARO",Re[Re.SAN_LUIS_POTOSI=102]="SAN_LUIS_POTOSI",Re[Re.SINALOA=103]="SINALOA",Re[Re.SONORA=104]="SONORA",Re[Re.TABASCO=105]="TABASCO",Re[Re.TAMIL_NADU=106]="TAMIL_NADU",Re[Re.YUCATAN=107]="YUCATAN",Re[Re.ZACATECAS=108]="ZACATECAS",Re[Re.AGUASCALIENTES=109]="AGUASCALIENTES",Re[Re.BAJA_CALIFORNIA_SUR=110]="BAJA_CALIFORNIA_SUR",Re[Re.CAMPECHE=111]="CAMPECHE",Re[Re.COLIMA=112]="COLIMA",Re[Re.QUINTANA_ROO_BENITO_JUAREZ=113]="QUINTANA_ROO_BENITO_JUAREZ",Re[Re.COUNT=114]="COUNT",(Ie=e.DocumentType||(e.DocumentType={}))[Ie.NONE=0]="NONE",Ie[Ie.CONSULAR_ID=1]="CONSULAR_ID",Ie[Ie.DL=2]="DL",Ie[Ie.DL_PUBLIC_SERVICES_CARD=3]="DL_PUBLIC_SERVICES_CARD",Ie[Ie.EMPLOYMENT_PASS=4]="EMPLOYMENT_PASS",Ie[Ie.FIN_CARD=5]="FIN_CARD",Ie[Ie.ID=6]="ID",Ie[Ie.MULTIPURPOSE_ID=7]="MULTIPURPOSE_ID",Ie[Ie.MyKad=8]="MyKad",Ie[Ie.MyKid=9]="MyKid",Ie[Ie.MyPR=10]="MyPR",Ie[Ie.MyTentera=11]="MyTentera",Ie[Ie.PAN_CARD=12]="PAN_CARD",Ie[Ie.PROFESSIONAL_ID=13]="PROFESSIONAL_ID",Ie[Ie.PUBLIC_SERVICES_CARD=14]="PUBLIC_SERVICES_CARD",Ie[Ie.RESIDENCE_PERMIT=15]="RESIDENCE_PERMIT",Ie[Ie.RESIDENT_ID=16]="RESIDENT_ID",Ie[Ie.TEMPORARY_RESIDENCE_PERMIT=17]="TEMPORARY_RESIDENCE_PERMIT",Ie[Ie.VOTER_ID=18]="VOTER_ID",Ie[Ie.WORK_PERMIT=19]="WORK_PERMIT",Ie[Ie.iKAD=20]="iKAD",Ie[Ie.MILITARY_ID=21]="MILITARY_ID",Ie[Ie.MyKAS=22]="MyKAS",Ie[Ie.SOCIAL_SECURITY_CARD=23]="SOCIAL_SECURITY_CARD",Ie[Ie.HEALTH_INSURANCE_CARD=24]="HEALTH_INSURANCE_CARD",Ie[Ie.PASSPORT=25]="PASSPORT",Ie[Ie.S_PASS=26]="S_PASS",Ie[Ie.ADDRESS_CARD=27]="ADDRESS_CARD",Ie[Ie.ALIEN_ID=28]="ALIEN_ID",Ie[Ie.ALIEN_PASSPORT=29]="ALIEN_PASSPORT",Ie[Ie.GREEN_CARD=30]="GREEN_CARD",Ie[Ie.MINORS_ID=31]="MINORS_ID",Ie[Ie.POSTAL_ID=32]="POSTAL_ID",Ie[Ie.PROFESSIONAL_DL=33]="PROFESSIONAL_DL",Ie[Ie.TAX_ID=34]="TAX_ID",Ie[Ie.WEAPON_PERMIT=35]="WEAPON_PERMIT",Ie[Ie.VISA=36]="VISA",Ie[Ie.BORDER_CROSSING_CARD=37]="BORDER_CROSSING_CARD",Ie[Ie.DRIVER_CARD=38]="DRIVER_CARD",Ie[Ie.GLOBAL_ENTRY_CARD=39]="GLOBAL_ENTRY_CARD",Ie[Ie.MyPolis=40]="MyPolis",Ie[Ie.NEXUS_CARD=41]="NEXUS_CARD",Ie[Ie.PASSPORT_CARD=42]="PASSPORT_CARD",Ie[Ie.PROOF_OF_AGE_CARD=43]="PROOF_OF_AGE_CARD",Ie[Ie.REFUGEE_ID=44]="REFUGEE_ID",Ie[Ie.TRIBAL_ID=45]="TRIBAL_ID",Ie[Ie.VETERAN_ID=46]="VETERAN_ID",Ie[Ie.CITIZENSHIP_CERTIFICATE=47]="CITIZENSHIP_CERTIFICATE",Ie[Ie.COUNT=48]="COUNT",(ce=e.DocumentImageColorStatus||(e.DocumentImageColorStatus={}))[ce.NotAvailable=0]="NotAvailable",ce[ce.BlackAndWhite=1]="BlackAndWhite",ce[ce.Color=2]="Color",(Ne=e.ImageAnalysisDetectionStatus||(e.ImageAnalysisDetectionStatus={}))[Ne.NotAvailable=0]="NotAvailable",Ne[Ne.NotDetected=1]="NotDetected",Ne[Ne.Detected=2]="Detected",(de=e.ProcessingStatus||(e.ProcessingStatus={}))[de.Success=0]="Success",de[de.DetectionFailed=1]="DetectionFailed",de[de.ImagePreprocessingFailed=2]="ImagePreprocessingFailed",de[de.StabilityTestFailed=3]="StabilityTestFailed",de[de.ScanningWrongSide=4]="ScanningWrongSide",de[de.FieldIdentificationFailed=5]="FieldIdentificationFailed",de[de.MandatoryFieldMissing=6]="MandatoryFieldMissing",de[de.InvalidCharactersFound=7]="InvalidCharactersFound",de[de.ImageReturnFailed=8]="ImageReturnFailed",de[de.BarcodeRecognitionFailed=9]="BarcodeRecognitionFailed",de[de.MrzParsingFailed=10]="MrzParsingFailed",de[de.ClassFiltered=11]="ClassFiltered",de[de.UnsupportedClass=12]="UnsupportedClass",de[de.UnsupportedByLicense=13]="UnsupportedByLicense",de[de.AwaitingOtherSide=14]="AwaitingOtherSide",de[de.Count=15]="Count",(le=e.RecognitionMode||(e.RecognitionMode={}))[le.None=0]="None",le[le.MrzId=1]="MrzId",le[le.MrzVisa=2]="MrzVisa",le[le.MrzPassport=3]="MrzPassport",le[le.PhotoId=4]="PhotoId",le[le.FullRecognition=5]="FullRecognition",le[le.BarcodeId=6]="BarcodeId",le[le.Count=7]="Count";class ue{constructor(){this.allowBlurFilter=!0,this.allowUnparsedMrzResults=!1,this.allowUnverifiedMrzResults=!0,this.recognitionModeFilter=new _e,this.scanCroppedDocumentImage=!1,this.validateResultCharacters=!0,this.anonymizationMode=e.AnonymizationMode.FullResult,this.barcodeScanningStartedCallback=null,this.classifierCallback=null,this.allowedDocumentClasses=null,this.paddingEdge=0,this.returnFullDocumentImage=!1,this.returnEncodedFullDocumentImage=!1,this._fullDocumentImageDpi=250,this.fullDocumentImageExtensionFactors=new Oe,this.returnFaceImage=!1,this.returnEncodedFaceImage=!1,this._faceImageDpi=250,this.returnSignatureImage=!1,this.returnEncodedSignatureImage=!1,this._signatureImageDpi=250}get fullDocumentImageDpi(){return this._fullDocumentImageDpi}set fullDocumentImageDpi(e){Ce(e),this._fullDocumentImageDpi=e}get faceImageDpi(){return this._faceImageDpi}set faceImageDpi(e){Ce(e),this._faceImageDpi=e}get signatureImageDpi(){return this._signatureImageDpi}set signatureImageDpi(e){Ce(e),this._signatureImageDpi=e}}(Se=e.IdBarcodeDocumentType||(e.IdBarcodeDocumentType={}))[Se.None=0]="None",Se[Se.AAMVACompliant=1]="AAMVACompliant",Se[Se.ArgentinaID=2]="ArgentinaID",Se[Se.ArgentinaAlienID=3]="ArgentinaAlienID",Se[Se.ArgentinaDL=4]="ArgentinaDL",Se[Se.ColombiaID=5]="ColombiaID",Se[Se.ColombiaDL=6]="ColombiaDL",Se[Se.NigeriaVoterID=7]="NigeriaVoterID",Se[Se.NigeriaDL=8]="NigeriaDL",Se[Se.PanamaID=9]="PanamaID",Se[Se.SouthAfricaID=10]="SouthAfricaID",e.BlinkIdCombinedRecognizerSettings=class extends ue{constructor(){super(...arguments),this.allowUncertainFrontSideScan=!1,this.maxAllowedMismatchesPerField=0,this.skipUnsupportedBack=!1,this.allowSignature=!1}},e.BlinkIdRecognizerSettings=ue,e.CapturedFrame=J,e.ExtensionFactors=Oe,e.IdBarcodeRecognizerSettings=class{},e.RecognitionModeFilter=_e,e.SDKError=h,e.SelectedCamera=w,e.VideoRecognizer=se,e.WasmSDKLoadSettings=class{constructor(e){if(this.allowHelloMessage=!0,this.engineLocation="",this.wasmType=null,this.numberOfWorkers=null,this.loadProgressCallback=null,this.wasmModuleName="BlinkIDWasmSDK",!e)throw new h(G.licenseKeyMissing);this.licenseKey=e}},e.bindCameraToVideoFeed=B,e.captureFrame=j,e.clearVideoFeed=Y,e.createBlinkIdCombinedRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("BlinkIdCombinedRecognizer")}))},e.createBlinkIdRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("BlinkIdRecognizer")}))},e.createIdBarcodeRecognizer=function(e){return t(this,void 0,void 0,(function*(){return e.mbWasmModule.newRecognizer("IdBarcodeRecognizer")}))},e.createRecognizerRunner=function(e,r,i=!1,s={}){return t(this,void 0,void 0,(function*(){if("object"!=typeof e)throw new h(G.missing);if("object"!=typeof r||1>r.length)throw new h(G.recognizersMissing);return e.mbWasmModule.createRecognizerRunner(r,i,s)}))},e.createSuccessFrameGrabberRecognizer=function(e,r){return t(this,void 0,void 0,(function*(){const t=yield e.mbWasmModule.newRecognizer("SuccessFrameGrabberRecognizer",r);return t.wrappedRecognizer=r,t}))},e.detectWasmType=function(r){return t(this,void 0,void 0,(function*(){const t=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])))(),i=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])))(),s=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])))(),o=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))(),n=yield(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));if(!(t&&i&&s&&o))return e.WasmType.Basic;if(!n)return e.WasmType.Advanced;try{return new Worker(r+"/Worker.test.js").terminate(),e.WasmType.AdvancedWithThreads}catch(t){return e.WasmType.Advanced}}))},e.frameCaptureErrors=K,e.getCameraDevices=H,e.isBrowserSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1},e.isInAppBrowser=function(){const e=navigator.userAgent||navigator.vendor;return!!/(instagram|fbav|linkedinapp|twitter|micromessenger|whatsapp|tiktok)[/\s]?([\w.]*)/i.exec(e)},e.licenseErrors=b,e.loadWasmModule=function(e){return t(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{if(!e||"object"!=typeof e)return void r(new h(G.wasmSettingsMissing));if("string"!=typeof e.licenseKey)return void r(new h(G.licenseKeyMissing));if(!e.wasmModuleName)return void r(new h(G.wasmModuleNameMissing));if("string"!=typeof e.engineLocation)return void r(new h(G.engineLocationInvalid));const i=function(){try{let e=localStorage.getItem("mb-user-id");return null===e&&(e=oe(),localStorage.setItem("mb-user-id",e)),e}catch(e){return oe()}}();try{const s=new Blob([String.raw`!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}let t=0;class s{constructor(e){this.action=e,this.messageID=function(){const e=t;return t+=1,e}()}}class n extends s{constructor(e,t){super(n.action),this.wasmModuleName=e.wasmModuleName,this.licenseKey=e.licenseKey,this.userId=t,this.registerLoadCallback=null!==e.loadProgressCallback,this.allowHelloMessage=e.allowHelloMessage,this.engineLocation=e.engineLocation,this.wasmType=e.wasmType,this.numberOfWorkers=e.numberOfWorkers}}var r,i;n.action="init",function(e){e[e.Any=0]="Any",e[e.Recognizer=1]="Recognizer",e[e.RecognizerSettings=2]="RecognizerSettings",e[e.Callback=3]="Callback"}(r||(r={}));class o extends s{constructor(e,t){super(o.action),this.funcName=e,this.params=t}}o.action="invokeFunction";class a extends s{constructor(e,t){super(a.action),this.className=e,this.params=t}}a.action="createNewNativeObject";class c extends s{constructor(e,t,s){super(c.action),this.recognizerHandles=e,this.allowMultipleResults=t,this.registeredMetadataCallbacks=s}}c.action="createRecognizerRunner";class E extends s{constructor(e,t){super(E.action),this.recognizerHandles=e,this.allowMultipleResults=t}}E.action="reconfigureRecognizerRunner";class R extends s{constructor(){super(R.action)}}R.action="deleteRecognizerRunner";class l extends s{constructor(e,t,s){super(l.action),this.objectHandle=e,this.methodName=t,this.params=s}}l.action="invokeObject";class _ extends s{constructor(e){super(_.action),this.frame=e}getTransferrables(){return[this.frame.imageData.data.buffer]}}_.action="processImage";class u extends s{constructor(e){super(u.action),this.hardReset=e}}u.action="resetRecognizers";class I extends s{constructor(e){super(I.action),this.registeredMetadataCallbacks=e}}I.action="registerMetadataCallbacks";class d extends s{constructor(e){super(d.action),this.detectionOnlyMode=e}}d.action="setDetectionOnly";class N extends s{constructor(e){super(N.action),this.callbackNonEmpty=e}}N.action="setClearTimeoutCallback";class O extends s{constructor(e){super(O.action),this.cameraPreviewMirrored=e}}O.action="setCameraPreviewMirrored";class h{constructor(e,t,s){this.success=!0,this.error=null,this.messageID=e,this.success=t,this.error=s}}class S{constructor(e,t,s,n){this.success=!0,this.showOverlay=!0,this.messageID=e,this.success=t,this.showOverlay=s,this.wasmType=n}}class g extends h{constructor(e,t){super(e,!0,null),this.result=t}}class C extends h{constructor(e,t){super(e,!0,null),this.objectHandle=t}}class m extends h{constructor(e,t){super(e,!0,null),this.recognitionState=t}}class A{constructor(e){this.isLoadProgressMessage=!0,this.progress=e}}!function(e){e[e.onDebugText=0]="onDebugText",e[e.onDetectionFailed=1]="onDetectionFailed",e[e.onQuadDetection=2]="onQuadDetection",e[e.onPointsDetection=3]="onPointsDetection",e[e.onFirstSideResult=4]="onFirstSideResult",e[e.clearTimeoutCallback=5]="clearTimeoutCallback",e[e.onGlare=6]="onGlare",e[e.recognizerCallback=7]="recognizerCallback"}(i||(i={}));class D{constructor(e,t){this.isCallbackMessage=!0,this.callbackType=e,this.callbackParameters=t}}function f(e,t){return t=t||"",""===(e=e||"")?t:e.endsWith("/")?t.startsWith("/")?e+t.substring(1):e+t:t.startsWith("/")?e+t:e+"/"+t}var M,L,y;function w(t){return e(this,void 0,void 0,(function*(){const e=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])))(),s=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,12,1,10,0,67,0,0,0,0,252,0,26,11])))(),n=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,65,0,192,26,11])))(),r=yield(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))(),i=yield(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]));if(!(e&&s&&n&&r))return M.Basic;if(!i)return M.Advanced;try{return new Worker(t+"/Worker.test.js").terminate(),M.AdvancedWithThreads}catch(e){return M.Advanced}}))}!function(e){e.Basic="BASIC",e.Advanced="ADVANCED",e.AdvancedWithThreads="ADVANCED_WITH_THREADS"}(M||(M={}));class T{constructor(e,t){if(!e.code||!e.message)throw Error("Instance of SDKError is required to have code and message.");this.message=e.message,this.code=e.code,this.details=t}}!function(e){e.WORKER_WASM_LOAD_FAILURE="WORKER_WASM_LOAD_FAILURE",e.WORKER_WASM_INIT_MISSING="WORKER_WASM_INIT_MISSING",e.WORKER_FUNCTION_INVOKE_FAILURE="WORKER_FUNCTION_INVOKE_FAILURE",e.WORKER_RECOGNIZER_CREATION_FAILURE="WORKER_RECOGNIZER_CREATION_FAILURE",e.WORKER_RUNNER_EXISTS="WORKER_RUNNER_EXISTS",e.WORKER_RUNNER_CREATION_FAILURE="WORKER_RUNNER_CREATION_FAILURE",e.WORKER_RUNNER_MISSING="WORKER_RUNNER_MISSING",e.WORKER_RUNNER_RECONFIGURE_FAILURE="WORKER_RUNNER_RECONFIGURE_FAILURE",e.WORKER_RUNNER_DELETED="WORKER_RUNNER_DELETED",e.WORKER_RUNNER_DELETE_FAILURE="WORKER_RUNNER_DELETE_FAILURE",e.WORKER_OBJECT_INVOKE_FAILURE="WORKER_OBJECT_INVOKE_FAILURE",e.WORKER_IMAGE_PROCESS_FAILURE="WORKER_IMAGE_PROCESS_FAILURE",e.WORKER_HANDLE_UNDEFINED="WORKER_HANDLE_UNDEFINED",e.WORKER_MESSAGE_ACTION_UNKNOWN="WORKER_MESSAGE_ACTION_UNKNOWN",e.WORKER_LICENSE_UNLOCK_ERROR="WORKER_LICENSE_UNLOCK_ERROR",e.LOCAL_SDK_RUNNER_MISSING="LOCAL_SDK_RUNNER_MISSING",e.LOCAL_SDK_RUNNER_EMPTY="LOCAL_SDK_RUNNER_EMPTY",e.LICENSE_UNLOCK_ERROR="LICENSE_UNLOCK_ERROR",e.FRAME_CAPTURE_SVG_UNSUPPORTED="FRAME_CAPTURE_SVG_UNSUPPORTED",e.FRAME_CAPTURE_CANVAS_MISSING="FRAME_CAPTURE_CANVAS_MISSING",e.SDK_WASM_SETTINGS_MISSING="SDK_WASM_SETTINGS_MISSING",e.SDK_LICENSE_KEY_MISSING="SDK_LICENSE_KEY_MISSING",e.SDK_WASM_MODULE_NAME_MISSING="SDK_WASM_MODULE_NAME_MISSING",e.SDK_ENGINE_LOCATION_INVALID="SDK_ENGINE_LOCATION_INVALID",e.SDK_MISSING="SDK_MISSING",e.SDK_RECOGNIZERS_MISSING="SDK_RECOGNIZERS_MISSING",e.VIDEO_RECOGNIZER_ELEMENT_MISSING="VIDEO_RECOGNIZER_ELEMENT_MISSING",e.VIDEO_RECOGNIZER_CAMERA_MISSING="VIDEO_RECOGNIZER_CAMERA_MISSING",e.VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED="VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED",e.VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE="VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE",e.VIDEO_RECOGNIZER_CAMERA_IN_USE="VIDEO_RECOGNIZER_CAMERA_IN_USE",e.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED="VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED",e.VIDEO_RECOGNIZER_FEED_RELEASED="VIDEO_RECOGNIZER_FEED_RELEASED",e.VIDEO_RECOGNIZER_FEED_NOT_PAUSED="VIDEO_RECOGNIZER_FEED_NOT_PAUSED",e.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED="VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED",e.VIDEO_RECOGNIZER_FEED_PAUSED="VIDEO_RECOGNIZER_FEED_PAUSED",e.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE="VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE",e.VIDEO_RECOGNIZER_FEED_MISSING="VIDEO_RECOGNIZER_FEED_MISSING"}(L||(L={})),function(e){e.WORKER_HANDLE_UNDEFINED="Cannot find object with handle: undefined",e.WORKER_WASM_LOAD_FAILURE="Failed to load WASM in web worker!",e.WORKER_WASM_INIT_MISSING="WASM module is not initialized!",e.WORKER_FUNCTION_INVOKE_FAILURE="Failed to invoke function!",e.WORKER_RECOGNIZER_CREATION_FAILURE="Failed to create new recognizer!",e.WORKER_RUNNER_EXISTS="Recognizer runner is already created! Multiple instances are not allowed!",e.WORKER_RUNNER_CREATION_FAILURE="Failed to create new recognizer runner!",e.WORKER_RUNNER_MISSING="Recognizer runner is not created! There is nothing to reconfigure!",e.WORKER_RUNNER_RECONFIGURE_FAILURE="Failed to reconfigure recognizer runner!",e.WORKER_RUNNER_DELETED="Recognizer runner is already deleted!",e.WORKER_RUNNER_DELETE_FAILURE="Failed to delete recognizer runner!",e.WORKER_OBJECT_INVOKE_FAILURE="Failed to invoke object!",e.WORKER_IMAGE_PROCESS_FAILURE="Recognizer runner is not initialized! Cannot process image!",e.LOCAL_SDK_RUNNER_MISSING="Property nativeRecognizerRunner is not available!",e.LOCAL_SDK_RUNNER_EMPTY="Native RecognizerRunner cannot be empty!",e.LICENSE_TOKEN_STATE_INCORRECT="Internal error (Incorrect token state)",e.LICENSE_PAYLOAD_VERIFICATION_FAILED="Failed to verify server permission's digital signature!",e.LICENSE_PAYLOAD_CORRUPTED="Server permission payload is corrupted!",e.LICENSE_PERMISSION_EXPIRED="Internal error (server permission expired)",e.LICENSE_REMOTE_LOCKED="Provided license key has been remotely locked. Please contact support for more information!",e.FRAME_CAPTURE_SVG_UNSUPPORTED="Recognition of SVG elements not supported!",e.FRAME_CAPTURE_CANVAS_MISSING="Could not get canvas 2d context!",e.SDK_WASM_SETTINGS_MISSING="Missing WASM load settings!",e.SDK_LICENSE_KEY_MISSING="Missing license key!",e.SDK_WASM_MODULE_NAME_MISSING="Missing WASM module name!",e.SDK_ENGINE_LOCATION_INVALID="Setting property 'engineLocation' must be a string!",e.SDK_MISSING="SDK is not provided!",e.SDK_RECOGNIZERS_MISSING="To create RecognizerRunner at least 1 recognizer is required.",e.VIDEO_RECOGNIZER_ELEMENT_MISSING="Video element, i.e. camera feed is not provided!",e.VIDEO_RECOGNIZER_CAMERA_MISSING="Camera not found!",e.VIDEO_RECOGNIZER_CAMERA_NOT_ALLOWED="Camera not allowed!",e.VIDEO_RECOGNIZER_CAMERA_UNAVAILABLE="Camera not available!",e.VIDEO_RECOGNIZER_CAMERA_IN_USE="Camera in use!",e.VIDEO_RECOGNIZER_MEDIA_DEVICES_UNSUPPORTED="Media devices not supported by browser.",e.VIDEO_RECOGNIZER_FEED_RELEASED="The associated video feed has been released!",e.VIDEO_RECOGNIZER_FEED_NOT_PAUSED="The associated video feed is not paused. Use resumeRecognition instead!",e.VIDEO_RECOGNIZER_PLAY_REQUEST_INTERRUPTED="The play() request was interrupted or prevented by browser security rules!",e.VIDEO_RECOGNIZER_FEED_PAUSED="Cannot resume recognition while video feed is paused! Use recognize or startRecognition",e.VIDEO_RECOGNIZER_RECOGNIZERS_RESET_FAILURE="Could not reset recognizers!",e.VIDEO_RECOGNIZER_FEED_MISSING="Missing video feed!"}(y||(y={}));const p={licenseTokenStateIncorrect:{code:L.LICENSE_UNLOCK_ERROR,message:y.LICENSE_TOKEN_STATE_INCORRECT},licensePayloadVerificationFailed:{code:L.LICENSE_UNLOCK_ERROR,message:y.LICENSE_PAYLOAD_VERIFICATION_FAILED},licensePayloadCorrupted:{code:L.LICENSE_UNLOCK_ERROR,message:y.LICENSE_PAYLOAD_CORRUPTED},licensePermissionExpired:{code:L.LICENSE_UNLOCK_ERROR,message:y.LICENSE_PERMISSION_EXPIRED},licenseRemoteLocked:{code:L.LICENSE_UNLOCK_ERROR,message:y.LICENSE_REMOTE_LOCKED},licenseNetworkError:{code:L.LICENSE_UNLOCK_ERROR},licenseInvalid:{code:L.LICENSE_UNLOCK_ERROR}},U={imageProcessFailure:{message:y.WORKER_IMAGE_PROCESS_FAILURE,code:L.WORKER_IMAGE_PROCESS_FAILURE},objectInvokeFailure:{message:y.WORKER_OBJECT_INVOKE_FAILURE,code:L.WORKER_OBJECT_INVOKE_FAILURE},runnerDeleteFailure:{message:y.WORKER_RUNNER_DELETE_FAILURE,code:L.WORKER_RUNNER_DELETE_FAILURE},runnerDeleted:{message:y.WORKER_RUNNER_DELETED,code:L.WORKER_RUNNER_DELETED},runnerReconfigureFailure:{message:y.WORKER_RUNNER_RECONFIGURE_FAILURE,code:L.WORKER_RUNNER_RECONFIGURE_FAILURE},runnerMissing:{message:y.WORKER_RUNNER_MISSING,code:L.WORKER_RUNNER_MISSING},runnerCreationFailure:{message:y.WORKER_RUNNER_CREATION_FAILURE,code:L.WORKER_RUNNER_CREATION_FAILURE},runnerExists:{message:y.WORKER_RUNNER_EXISTS,code:L.WORKER_RUNNER_EXISTS},recognizerCreationFailure:{message:y.WORKER_RECOGNIZER_CREATION_FAILURE,code:L.WORKER_RECOGNIZER_CREATION_FAILURE},functionInvokeFailure:{message:y.WORKER_FUNCTION_INVOKE_FAILURE,code:L.WORKER_FUNCTION_INVOKE_FAILURE},wasmInitMissing:{message:y.WORKER_WASM_INIT_MISSING,code:L.WORKER_WASM_INIT_MISSING},wasmLoadFailure:{message:y.WORKER_WASM_LOAD_FAILURE,code:L.WORKER_WASM_LOAD_FAILURE},handleUndefined:{message:y.WORKER_HANDLE_UNDEFINED,code:L.WORKER_HANDLE_UNDEFINED}};var b,F;!function(e){e[e.Invalid=0]="Invalid",e[e.RequiresServerPermission=1]="RequiresServerPermission",e[e.Valid=2]="Valid"}(b||(b={})),function(e){e.LicenseTokenStateInvalid="LICENSE_TOKEN_STATE_INVALID",e.NetworkError="NETWORK_ERROR",e.RemoteLock="REMOTE_LOCK",e.PermissionExpired="PERMISSION_EXPIRED",e.PayloadCorrupted="PAYLOAD_CORRUPTED",e.PayloadSignatureVerificationFailed="PAYLOAD_SIGNATURE_VERIFICATION_FAILED",e.IncorrectTokenState="INCORRECT_TOKEN_STATE"}(F||(F={}));function k(e){return{licenseId:e.licenseId,licensee:e.licensee,packageName:e.packageName,platform:"Browser",sdkName:e.sdkName,sdkVersion:e.sdkVersion}}var K;function v(t,s){return e(this,void 0,void 0,(function*(){try{const e=yield fetch("https://baltazar.microblink.com/api/v1/status/check",{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-cache",body:JSON.stringify(k(t))});if(e.ok){const t=""+(yield e.text());return s.submitServerPermission(t)}return{status:K.NetworkError,lease:0,networkErrorDescription:"Server responded with status "+e.status}}catch(e){return{status:K.NetworkError,lease:0,networkErrorDescription:"Unexpected error: "+JSON.stringify(e)}}}))}function P(e){return e===M.AdvancedWithThreads}!function(e){e[e.Ok=0]="Ok",e[e.NetworkError=1]="NetworkError",e[e.RemoteLock=2]="RemoteLock",e[e.PermissionExpired=3]="PermissionExpired",e[e.PayloadCorrupted=4]="PayloadCorrupted",e[e.PayloadSignatureVerificationFailed=5]="PayloadSignatureVerificationFailed",e[e.IncorrectTokenState=6]="IncorrectTokenState"}(K||(K={}));new class{constructor(){this.context=self,this.wasmModule=null,this.nativeRecognizerRunner=null,this.objects={},this.nextObjectHandle=0,this.metadataCallbacks={},this.clearTimeoutCallback=null,this.context.onmessage=e=>{const t=e.data;switch(t.action){case n.action:this.processInitMessage(t);break;case o.action:this.processInvokeFunction(t);break;case a.action:this.processCreateNewRecognizer(t);break;case l.action:this.processInvokeObject(t);break;case c.action:this.processCreateRecognizerRunner(t);break;case E.action:this.processReconfigureRecognizerRunner(t);break;case R.action:this.processDeleteRecognizerRunner(t);break;case _.action:this.processImage(t);break;case u.action:this.resetRecognizers(t);break;case d.action:this.setDetectionOnly(t);break;case O.action:this.setCameraPreviewMirrored(t);break;case I.action:this.registerMetadataCallbacks(t);break;case N.action:this.registerClearTimeoutCallback(t);break;default:throw new T({code:L.WORKER_MESSAGE_ACTION_UNKNOWN,message:"Unknown message action: "+JSON.stringify(t.action)})}}}getNextObjectHandle(){const e=this.nextObjectHandle;return this.nextObjectHandle=this.nextObjectHandle+1,e}notifyError(e,t){this.context.postMessage(new h(e.messageID,!1,t))}notifySuccess(e){this.context.postMessage(new h(e.messageID,!0,null))}notifyInitSuccess(e,t,s){this.context.postMessage(new S(e.messageID,!0,t,s))}unwrapParameters(e){const t=[];for(const s of e.params){let n=s.parameter;s.type===r.Recognizer?(n=this.objects[n],void 0===n&&this.notifyError(e,new T(U.handleUndefined))):s.type===r.RecognizerSettings&&(n=this.restoreFunctions(n)),t.push(n)}return t}restoreFunctions(e){const t=Object.keys(e);for(const s of t){const t=e[s];"object"==typeof t&&null!==t&&"parameter"in t&&"type"in t&&t.type===r.Callback&&(e[s]=(...e)=>{const s=new D(i.recognizerCallback,[t.parameter].concat(e));this.context.postMessage(s)})}return e}scanForTransferrables(e){if("object"==typeof e){const t=Object.keys(e),s=[];for(const n of t){const t=e[n];t instanceof ImageData?s.push(t.data.buffer):t instanceof Uint8Array?s.push(t.buffer):null!==t&&"object"==typeof t&&s.push(...this.scanForTransferrables(t))}return s}return[]}registerHeartBeat(e){this.unregisterHeartBeat(),this.lease=e;let t=e-Math.floor(Date.now()/1e3);t>120?t-=120:t/=2,this.inFlightHeartBeatTimeoutId=setTimeout((()=>{this.obtainNewServerPermission(!0)}),1e3*t)}unregisterHeartBeat(){this.lease&&delete this.lease,this.inFlightHeartBeatTimeoutId&&(clearTimeout(this.inFlightHeartBeatTimeoutId),delete this.inFlightHeartBeatTimeoutId)}obtainNewServerPermission(t){return e(this,void 0,void 0,(function*(){if(this.wasmModule){const e=this.wasmModule.getActiveLicenseTokenInfo(),s=yield v(e,this.wasmModule);switch(s.status){case K.Ok:case K.RemoteLock:this.registerHeartBeat(s.lease);break;case K.NetworkError:case K.PayloadSignatureVerificationFailed:case K.PayloadCorrupted:t?(console.warn("Problem with obtaining server permission. Will attempt in 10 seconds "+K[s.status]),this.inFlightHeartBeatTimeoutId=setTimeout((()=>{this.obtainNewServerPermission(!1)}),1e4)):console.error("Problem with obtaining server permission. "+K[s.status]);break;case K.IncorrectTokenState:case K.PermissionExpired:console.error("Internal error: "+K[s.status])}return s.status}return console.error("Internal inconsistency! Wasm module not initialized where it's expected to be!"),K.IncorrectTokenState}))}willSoonExpire(){if(this.lease){if(this.wasmModule.getActiveLicenseTokenInfo().unlockResult===b.Valid){const e=Math.floor(Date.now()/1e3);return 30>this.lease-e}return!0}return!1}calculateWasmType(t){return e(this,void 0,void 0,(function*(){return null!==t.wasmType?t.wasmType:yield w(t.engineLocation)}))}calculateEngineLocationPrefix(e,t){const s=f(""===e.engineLocation?self.location.origin:e.engineLocation,function(e){switch(e){case M.AdvancedWithThreads:return"advanced-threads";case M.Advanced:return"advanced";case M.Basic:return"basic"}}(t));return e.allowHelloMessage&&console.log("Engine location prefix is:",s),s}processInitMessage(t){return e(this,void 0,void 0,(function*(){const s=yield this.calculateWasmType(t),n=this.calculateEngineLocationPrefix(t,s);let r={locateFile:e=>f(n,e)};t.registerLoadCallback&&(r=Object.assign(r,{setStatus:e=>{const t=new A(function(e){if("Running..."===e)return 100;if(0===e.length)return 0;const t=/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/.exec(e);if(t)return 100*parseInt(t[2])/parseInt(t[4]);return NaN}(e));this.context.postMessage(t)}}));try{const i=f(n,t.wasmModuleName+".js");P(s)&&(r=function(e,t,s){return t&&t>0&&(e=Object.assign(e,{allowedThreads:t})),null!==s&&(e=Object.assign(e,{mainScriptUrlOrBlob:s})),e}(r,t.numberOfWorkers,i)),importScripts(i);(0,self[t.wasmModuleName])(r).then((n=>e(this,void 0,void 0,(function*(){P(s)&&(t.allowHelloMessage&&console.log("Waiting for thread workers to boot..."),yield function(t){return e(this,void 0,void 0,(function*(){t.threadWorkersReadyPromise&&(yield t.threadWorkersReadyPromise)}))}(n));const r=yield function(t,s,n,r){return e(this,void 0,void 0,(function*(){const e=r.initializeWithLicenseKey(t,n,s);switch(e.unlockResult){case b.Invalid:return{error:new T(Object.assign(Object.assign({},p.licenseInvalid),{message:e.licenseError}),{type:F.LicenseTokenStateInvalid})};case b.Valid:return{error:null,showOverlay:(i=e.isTrial,o=e.allowRemoveDemoOverlay,a=e.allowRemoveProductionOverlay,!(i&&o||!i&&a))};case b.RequiresServerPermission:{const t=yield v(e,r);switch(t.status){case K.Ok:return{error:null,lease:t.lease};case K.NetworkError:{let e="";return t.networkErrorDescription&&(e=" "+t.networkErrorDescription),{error:new T(Object.assign(Object.assign({},p.licenseNetworkError),{message:"There has been a network error while obtaining the server permission!"+e}),{type:F.NetworkError})}}case K.RemoteLock:return{error:new T(p.licenseRemoteLocked,{type:F.RemoteLock}),lease:t.lease};case K.PermissionExpired:return{error:new T(p.licensePermissionExpired,{type:F.PermissionExpired}),lease:t.lease};case K.PayloadCorrupted:return{error:new T(p.licensePayloadCorrupted,{type:F.PayloadCorrupted}),lease:t.lease};case K.PayloadSignatureVerificationFailed:return{error:new T(p.licensePayloadVerificationFailed,{type:F.PayloadSignatureVerificationFailed}),lease:t.lease};case K.IncorrectTokenState:return{error:new T(p.licenseTokenStateIncorrect,{type:F.IncorrectTokenState}),lease:t.lease}}}}var i,o,a}))}(t.licenseKey,t.allowHelloMessage,t.userId,n);null===r.error?(this.wasmModule=n,r.lease?this.registerHeartBeat(r.lease):this.unregisterHeartBeat(),this.notifyInitSuccess(t,!!r.showOverlay,s)):this.notifyError(t,r.error)}))),(e=>{this.notifyError(t,new T(U.wasmLoadFailure,e))}))}catch(e){this.notifyError(t,new T(U.wasmLoadFailure,e))}}))}processInvokeFunction(e){if(null===this.wasmModule)return void this.notifyError(e,new T(U.wasmInitMissing));const t=e.funcName,s=this.unwrapParameters(e);try{const n=this.wasmModule[t](...s);this.context.postMessage(new g(e.messageID,n))}catch(t){this.notifyError(e,new T(U.functionInvokeFailure,t))}}processCreateNewRecognizer(e){if(null===this.wasmModule)return void this.notifyError(e,new T(U.wasmInitMissing));const t=e.className,s=this.unwrapParameters(e);try{const n=new this.wasmModule[t](...s),r=this.getNextObjectHandle();this.objects[r]=n,this.context.postMessage(new C(e.messageID,r))}catch(t){this.notifyError(e,new T(U.recognizerCreationFailure,t))}}getRecognizers(e){const t=[];for(const s of e){t.push(this.objects[s])}return t}processCreateRecognizerRunner(t){return e(this,void 0,void 0,(function*(){if(null===this.wasmModule)this.notifyError(t,new T(U.wasmInitMissing));else if(null!==this.nativeRecognizerRunner)this.notifyError(t,new T(U.runnerExists));else{this.setupMetadataCallbacks(t.registeredMetadataCallbacks);try{if(this.willSoonExpire()){const e=yield this.obtainNewServerPermission(!1);if(e!==K.Ok){const s=K[e];return void this.notifyError(t,new T({code:L.WORKER_LICENSE_UNLOCK_ERROR,message:"Cannot initialize recognizers because of invalid server permission: \n                                    "+s},{type:F[s]}))}}const e=this.getRecognizers(t.recognizerHandles);this.nativeRecognizerRunner=new this.wasmModule.RecognizerRunner(e,t.allowMultipleResults,this.metadataCallbacks),this.notifySuccess(t)}catch(e){this.notifyError(t,new T(U.runnerCreationFailure,e))}}}))}processReconfigureRecognizerRunner(e){if(null===this.wasmModule)this.notifyError(e,new T(U.wasmInitMissing));else if(null===this.nativeRecognizerRunner)this.notifyError(e,new T(U.runnerMissing));else try{const t=this.getRecognizers(e.recognizerHandles);this.nativeRecognizerRunner.reconfigureRecognizers(t,e.allowMultipleResults),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.runnerReconfigureFailure,t))}}processDeleteRecognizerRunner(e){if(null!==this.nativeRecognizerRunner)try{this.nativeRecognizerRunner.delete(),this.nativeRecognizerRunner=null,this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.runnerDeleteFailure,t))}else this.notifyError(e,new T(U.runnerDeleted))}wrapFunctions(e,t){if("object"!=typeof e)return e;const s=Object.assign({},e),n=Object.keys(s);for(const e of n){if("function"==typeof s[e]){s[e]={parameter:{recognizerHandle:t,callbackName:e},type:r.Callback}}}return s}processInvokeObject(e){try{const t=e.objectHandle,s=e.methodName,n=this.unwrapParameters(e),r=this.objects[t];if(void 0===r)this.notifyError(e,new T({message:"Cannot find object with handle: "+t,code:L.WORKER_HANDLE_UNDEFINED}));else{const i=this.wrapFunctions(r[s](...n),t),o=this.scanForTransferrables(i);"delete"===s&&delete this.objects[t],this.context.postMessage(new g(e.messageID,i),o)}}catch(t){this.notifyError(e,new T(U.objectInvokeFailure,t))}}processImage(e){if(null!==this.nativeRecognizerRunner)try{const t=this.nativeRecognizerRunner.processImage(e.frame);this.context.postMessage(new m(e.messageID,t))}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}else this.notifyError(e,new T(U.imageProcessFailure))}resetRecognizers(e){if(null!==this.nativeRecognizerRunner)try{this.nativeRecognizerRunner.resetRecognizers(e.hardReset),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}else this.notifyError(e,new T(U.imageProcessFailure))}setDetectionOnly(e){if(null!==this.nativeRecognizerRunner)try{this.nativeRecognizerRunner.setDetectionOnlyMode(e.detectionOnlyMode),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}else this.notifyError(e,new T(U.imageProcessFailure))}setCameraPreviewMirrored(e){if(null!==this.nativeRecognizerRunner)try{this.nativeRecognizerRunner.setCameraPreviewMirrored(e.cameraPreviewMirrored),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}else this.notifyError(e,new T(U.imageProcessFailure))}setupMetadataCallbacks(e){e.onDebugText?this.metadataCallbacks.onDebugText=e=>{const t=new D(i.onDebugText,[e]);this.context.postMessage(t)}:delete this.metadataCallbacks.onDebugText,e.onDetectionFailed?this.metadataCallbacks.onDetectionFailed=()=>{const e=new D(i.onDetectionFailed,[]);this.context.postMessage(e)}:delete this.metadataCallbacks.onDetectionFailed,e.onPointsDetection?this.metadataCallbacks.onPointsDetection=e=>{const t=new D(i.onPointsDetection,[e]);this.context.postMessage(t)}:delete this.metadataCallbacks.onPointsDetection,e.onQuadDetection?this.metadataCallbacks.onQuadDetection=e=>{const t=new D(i.onQuadDetection,[e]);this.context.postMessage(t)}:delete this.metadataCallbacks.onQuadDetection,e.onFirstSideResult?this.metadataCallbacks.onFirstSideResult=()=>{const e=new D(i.onFirstSideResult,[]);this.context.postMessage(e)}:delete this.metadataCallbacks.onFirstSideResult,e.onGlare?this.metadataCallbacks.onGlare=e=>{const t=new D(i.onGlare,[e]);this.context.postMessage(t)}:delete this.metadataCallbacks.onGlare}registerMetadataCallbacks(e){if(null!==this.nativeRecognizerRunner){this.setupMetadataCallbacks(e.registeredMetadataCallbacks);try{this.nativeRecognizerRunner.setJSDelegate(this.metadataCallbacks),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}}else this.notifyError(e,new T(U.imageProcessFailure))}registerClearTimeoutCallback(e){if(null!==this.nativeRecognizerRunner){this.clearTimeoutCallback=e.callbackNonEmpty?{onClearTimeout:()=>{const e=new D(i.clearTimeoutCallback,[]);this.context.postMessage(e)}}:null;try{this.nativeRecognizerRunner.setClearTimeoutCallback(this.clearTimeoutCallback),this.notifySuccess(e)}catch(t){this.notifyError(e,new T(U.imageProcessFailure,t))}}else this.notifyError(e,new T(U.imageProcessFailure))}}}();
`],{type:"application/javascript"}),o=URL.createObjectURL(s),n=new Worker(o);U.createWasmWorker(n,e,i).then((e=>{t(e)}),r)}catch(e){r(e)}}))}))},e.localSdkErrors=f,e.obtainNewServerPermission=ie,e.sdkErrors=G,e.selectCamera=k,e.unlockWasmSDK=function(r,i,s,o){return t(this,void 0,void 0,(function*(){const t=o.initializeWithLicenseKey(r,s,i);switch(t.unlockResult){case e.LicenseTokenState.Invalid:return{error:new h(Object.assign(Object.assign({},b.licenseInvalid),{message:t.licenseError}),{type:e.LicenseErrorType.LicenseTokenStateInvalid})};case e.LicenseTokenState.Valid:return{error:null,showOverlay:(n=t.isTrial,a=t.allowRemoveDemoOverlay,A=t.allowRemoveProductionOverlay,!(n&&a||!n&&A))};case e.LicenseTokenState.RequiresServerPermission:{const r=yield ie(t,o);switch(r.status){case e.ServerPermissionSubmitResultStatus.Ok:return{error:null,lease:r.lease};case e.ServerPermissionSubmitResultStatus.NetworkError:{let t="";return r.networkErrorDescription&&(t=" "+r.networkErrorDescription),{error:new h(Object.assign(Object.assign({},b.licenseNetworkError),{message:"There has been a network error while obtaining the server permission!"+t}),{type:e.LicenseErrorType.NetworkError})}}case e.ServerPermissionSubmitResultStatus.RemoteLock:return{error:new h(b.licenseRemoteLocked,{type:e.LicenseErrorType.RemoteLock}),lease:r.lease};case e.ServerPermissionSubmitResultStatus.PermissionExpired:return{error:new h(b.licensePermissionExpired,{type:e.LicenseErrorType.PermissionExpired}),lease:r.lease};case e.ServerPermissionSubmitResultStatus.PayloadCorrupted:return{error:new h(b.licensePayloadCorrupted,{type:e.LicenseErrorType.PayloadCorrupted}),lease:r.lease};case e.ServerPermissionSubmitResultStatus.PayloadSignatureVerificationFailed:return{error:new h(b.licensePayloadVerificationFailed,{type:e.LicenseErrorType.PayloadSignatureVerificationFailed}),lease:r.lease};case e.ServerPermissionSubmitResultStatus.IncorrectTokenState:return{error:new h(b.licenseTokenStateIncorrect,{type:e.LicenseErrorType.IncorrectTokenState}),lease:r.lease}}}}var n,a,A}))},e.validateDpi=Ce,e.videoRecognizerErrors=p,e.wasmFolder=function(t){switch(t){case e.WasmType.AdvancedWithThreads:return"advanced-threads";case e.WasmType.Advanced:return"advanced";case e.WasmType.Basic:return"basic"}},e.workerErrors=v,Object.defineProperty(e,"__esModule",{value:!0})}));
